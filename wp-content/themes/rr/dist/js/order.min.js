"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".site__content_full"),function(){new o($(this))}),$.each($(".plans"),function(){new i($(this))}),$.each($(".site__header"),function(){new e($(this))}),$(".popup").each(function(){new s($(this))}),$(document).bind("gform_confirmation_loaded",function(){$(".popup__request").addClass("popup__request_no-bg")})});var t=function(t){var n=this,o=t,i=o,e=$(window),s=(e.width(),function(){e.on({resize:function(){r(),a()},load:function(){a()},scroll:function(){a()}})}),a=function(){var t,n=o.offset().top,i=n-e.height(),s=n+o.height(),a=(s-e.scrollTop())/(s-i);a>1?t=0:a<0&&(t=1),a<1&&a>0&&(t=1-a),o.hasClass("putted-all")&&(t=.5),c(i,s,t)},c=function(t,n,o){i.each(function(){var t=$(this),n=100,i=1;t.hasClass("clouds_1")&&(i=-1),0==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):1==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):(o>=.5&&(o=1-o),t.css({"-webkit-transform":"translateX("+200*o*i+"%)",transform:"translateX("+200*o*i+"%)"}))})},r=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},h=function(){o[0].obj=n,s(),r()};h()},n=function(t){var n=this,o=t,i=o.find(".guy__hand"),e=$(window),s=e.width(),a=function(){e.on({resize:function(){s!=e.width()&&(s=e.width()+1,e.width()<768&&i.css({"-webkit-transform":"none",transform:"none"})),h(),r(),c()},load:function(){e.width()>=768&&c()},scroll:function(){e.width()>=768&&c()}})},c=function(){var t,n=e.height(),s=o.offset().top,a=i.offset().top-n,c=s-n+o.height();o.hasClass("putted")&&(a=i.offset().top-n/2,c=n/2.5);var r=(c-e.scrollTop())/(c-a);r>1?t=0:r<0&&(t=1),r<1&&r>0&&(t=1-r),o.hasClass("putted-all")&&(t=1),u(a,c,t)},r=function(){var t=e.height(),n=e.scrollTop(),s=i.height(),a=i.offset().top;s+a<t+n&&$(".site").height()>2*t?o.addClass("putted"):o.removeClass("putted")},h=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},u=function(t,n,o){var s=n-t;i.each(function(){var n=$(this),i=n.data("rotate-start"),a=n.data("rotate-finish"),c=i+(a-i)/s*(e.scrollTop()-t);1==o?n.css({"-webkit-transform":"rotate( "+-a+"deg )",transform:"rotate( "+-a+"deg )"}):0==o?n.css({"-webkit-transform":"rotate( "+-i+"deg )",transform:"rotate( "+-i+"deg )"}):n.css({"-webkit-transform":"rotate( "+-c+"deg )",transform:"rotate( "+-c+"deg )"})})},f=function(){o[0].obj=n,a(),r(),h()};f()},o=function(t){var n=this,o=t,i=$(window),e=$(".site__header"),s=function(){i.on({resize:function(){a()}})},a=function(){var t=e.height();o.height(i.height()-t),o.css({"min-height":o.find(">div:first").height()})},c=function(){o[0].obj=n,s(),a()};c()},i=function(t){var n=this,o=t,i=$(window),e=o.find(".plans__list_caption"),s=o.find(".plans__list-row:not(.plans__list_caption)"),a=[],c=[],r=function(){i.on({load:function(){i.width()>=1024&&h()},resize:function(){i.width()<1024?(e.css({height:""}),s.css({height:""})):h()}})},h=function(){a=[],c=[],e.each(function(){var t=$(this).innerHeight();a.push(t)});var t=Math.max.apply(Math,a);s.each(function(){var t=$(this).innerHeight();c.push(t)});var n=Math.max.apply(Math,c);e.innerHeight(t),s.innerHeight(n)},u=function(){o[0].obj=n,r()};u()},e=function(t){var n=this,o=t,i=($(window),o.find(".site__header__btn")),e=o.find(".site__header-menu"),s=($(".site__content"),$("html")),a=function(){o.removeClass("opened"),s.css({"overflow-y":"auto"}),e.attr("style","")},c=function(){i.on({click:function(){return o.hasClass("opened")?a():r(),!1}})},r=function(){o.addClass("opened"),s.css({"overflow-y":"hidden"})},h=function(){c(),o[0].obj=n};h()},s=function(t){var n=this,o=40,i=$(".popup__open"),e=t,s=e.find(".popup__close, .popup__cancel"),a=e.find(".popup__wrap"),c=e.find(".popup__content"),r=$("html"),h=$(window),u=setTimeout(function(){},1),f=function(){h.height()-2*o-a.height()>0?a.css({top:(h.height()-2*o-a.height())/2}):a.css({top:0})},d=function(){var t,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t},l=function(){e.css({overflowY:"hidden"}),r.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),u=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},p=function(){e[0].obj=n,_()},_=function(){h.on({resize:function(){f()}}),i.on({click:function(){return w($(this).attr("data-popup")),!1}}),a.on({click:function(t){t.stopPropagation()}}),e.on({click:function(){return l(),!1}}),s.on({click:function(){return l(),!1}})},w=function(t){g(t),r.css({overflowY:"hidden",paddingRight:d()}),e.addClass("popup_opened"),f()},g=function(t){var n=c.filter(".popup__"+t);c.css({display:"none"}),n.css({display:"block"})};p()}}();
"use strict";!function(){$(function(){$.each($(".choose-data"),function(){new t($(this))}),$.each($(".order"),function(){new a($(this))}),$.each($(".plans"),function(){new e($(this))})});var t=function(t){var a=this,e=t,n=e.find(".choose-data__items"),i=n.find("input"),r=e.find(".btn_next"),o={},s={},c={},l=function(){i.on({click:function(){f($(this)),v(),localStorage.setItem("idItems",JSON.stringify(c))}}),r.on({click:function(){var t=$(this),a=t.data("src");return h(),window.location.href=a,!1}})},f=function(t){var a=t;"radio"===a.attr("type")?(a.parents(".plans").length?o.ratePlan={sessionType:a.data("rate"),value:a.attr("value")}:o[a.attr("name")]=a.attr("value"),c[a.attr("name")]=a.attr("id")):"checkbox"===a.attr("type")&&(a.is(":checked")?(s[a.attr("name")]=a.attr("value"),c[a.attr("name")]=a.attr("id")):(delete s[a.attr("name")],delete c[a.attr("name")]))},d=function(){if(void 0!=localStorage.idItems){i.each(function(){var t=$(this);"checkbox"===t.attr("type")&&t.prop("checked",!1)});var t=JSON.parse(localStorage.idItems);for(var a in t){var e=t[a];i.filter("#"+e).prop("checked",!0)}}},h=function(){i.each(function(){var t=$(this);t.is(":checked")&&("radio"===t.attr("type")?c[t.attr("name")]=t.attr("id"):"checkbox"===t.attr("type")&&(t.is(":checked")?c[t.attr("name")]=t.attr("id"):delete c[t.attr("name")]))}),localStorage.setItem("idItems",JSON.stringify(c))},u=function(){i.each(function(){var t=$(this);t.is(":checked")&&("radio"===t.attr("type")?t.parents(".plans").length?o.ratePlan={sessionType:t.data("rate"),value:t.attr("value")}:o[t.attr("name")]=t.attr("value"):"checkbox"===t.attr("type")&&(t.is(":checked")?s[t.attr("name")]=t.attr("value"):delete s[t.attr("name")]))}),v()},v=function(){localStorage.setItem("radioChoose",JSON.stringify(o)),localStorage.setItem("checkboxChoose",JSON.stringify(s))},p=function(){e[0].obj=a,l(),d(),u()};p()},a=function(t){var a,e,n=this,i=t,r=i.find(".order__chosen-data span"),o=i.find("input#input_1_5"),s="",c=function(){},l=function(){var t="",n="",i=[];for(var o in a)var s=a[o];void 0!=a.ratePlan&&$.each(a.ratePlan,function(){var e=a.ratePlan.value.split(" ");if("session pricing"===a.ratePlan.sessionType)t="<span>"+a.ratePlan.sessionType+" ("+e[0]+" sessions)</span>";else if("minute pricing"===a.ratePlan.sessionType){var n=e[0].replace(/[^0-9]+/g,"");n>1e5&&(n=n/1e6+"M"),t="<span>"+a.ratePlan.sessionType+" ("+n+" minutes ("+e[2]+"/minute)</span>"}});for(var c in e)i.push(c);i.length>0&&(n=1==i.length?"+ "+i.length+" service":"+ "+i.length+" service"),r.html("You chose "+t+", "+s+" "+n+").")},f=function(){s="";for(var t in a){var n=a[t];if("string"==typeof n)s+=""+n+"; ";else if("object"==typeof n)for(var i in n){var r=n[i];s+=""+r+"; "}}for(var c in e){var l=e[c];s+=""+l+"; "}o.val(s)},d=function(){void 0!=localStorage.radioChoose?(a=JSON.parse(localStorage.radioChoose),e=JSON.parse(localStorage.checkboxChoose),f(),l()):window.location.href=$("body").data("src")},h=function(){i[0].obj=n,c(),d()};h()},e=function(t){var a=this,e=t,n=e.find(".plans__item"),i=e.find('input[type="radio"]'),r=$(window),o=function(){r.on({load:function(){s()}}),i.on({change:function(){var t=$(this),a=t.parents(".plans__item");a.hasClass("active")||(n.removeClass("active"),a.addClass("active"))}}),n.on({click:function(){var t=$(this),a=t.find('input[type="radio"]:first');t.hasClass("active")||(n.removeClass("active"),t.addClass("active"),a.trigger("click"))}})},s=function(){var t=i.filter(":checked"),a=t.parents(".plans__item");a.addClass("active")},c=function(){e[0].obj=a,o()};c()}}();
!function(){$(function(){"use strict";$.each($(".order__place"),function(){new t($(this))})});var t=function(t){var n=this,i=t,a=i.find("form"),e=i.find('input[data-required="required"], textarea[data-required="required"], input[aria-required="true"], textarea[aria-required="true"]'),o=i.find('input[data-validation="valid"]'),s=function(){u(),i[0].obj=n},r=function(){e.each(function(){""===$(this).val()&&$(this).addClass("not-touched")}),o.each(function(){l($(this))})},u=function(){a.on({submit:function(){return r(),e.hasClass("not-touched")?(i.find(".not-touched:first").focus(),!1):!o.hasClass("not-valid")||(i.find(".not-valid:first").focus(),!1)}}),e.on({keypress:function(){$(this).removeClass("not-touched")}}),o.on({keyup:function(){l($(this))}})},d=function(t){t.addClass("not-valid"),t.removeClass("valid")},c=function(t){t.removeClass("not-valid"),t.addClass("valid")},f=function(t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)},l=function(t,n){var i=t.attr("type");t.attr("class");return"email"!==i||f(t.val())?void c(t):(d(t),!1)};n.checkValid=function(){var t=!0;return _fields.each(function(){$(this).removeClass("not-touched"),$(this).hasClass("not-valid")&&(t=!1)}),t},s()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmNoZWNrb3V0LmpzIiwianF1ZXJ5LmZvcm0udmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiQ2xvdWRzQW5pbWF0ZWQiLCJ0aGlzIiwiR3V5QW5pbWF0ZWQiLCJDb250ZW50RnVsbEhlaWdodCIsIlBsYW5zQ2hvb3NlSGVpZ2h0IiwiTWVudSIsIlBvcHVwIiwiZG9jdW1lbnQiLCJiaW5kIiwiYWRkQ2xhc3MiLCJvYmoiLCJfc2VsZiIsIl9vYmoiLCJfaXRlbXMiLCJfd2luZG93Iiwid2luZG93IiwiX2FkZEV2ZW50cyIsIndpZHRoIiwib24iLCJyZXNpemUiLCJfY2hlY2tQdXRJbldpbmRvdyIsIl9jaGVja1Njcm9sbCIsImxvYWQiLCJzY3JvbGwiLCJzY3JvbGxQb2ludCIsInRvcFBvcyIsIm9mZnNldCIsInRvcCIsInN0YXJ0IiwiaGVpZ2h0IiwiZW5kIiwieCIsInNjcm9sbFRvcCIsImhhc0NsYXNzIiwiX2FuaW1hdGlvbkVsZW1zIiwic3RhcnRQb2ludCIsImVuZFBvaW50IiwiY3VyRWxlbSIsInRyYW5zbGF0ZUZpbmlzaCIsImNzcyIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiaGVpZ2h0V2luIiwiaGVpZ2h0U2l0ZSIsInJlbW92ZUNsYXNzIiwiX2luaXQiLCJfaGFuZCIsImZpbmQiLCJfZ2xvYmFsV2lkdGgiLCJfY2hlY2tHZXRJbldpbmRvdyIsIndpbmRvd0giLCJzY3JvbGxUb3BXaW4iLCJoZWlnaHRPYmoiLCJwb3NpdGlvbk9iaiIsInNlZ21lbnQiLCJyb3RhdGVTdGFydCIsImRhdGEiLCJyb3RhdGVGaW5pc2giLCJrb2ZSb3RhdGUiLCJfaGVhZGVyIiwiX3NldEhlaWdodCIsImhlYWRlckhlaWd0aCIsIm1pbi1oZWlnaHQiLCJfY2FwdGlvbiIsIl9jb250ZW50IiwiX2NhcHRpb25IZWlnaHRzIiwiX2NvbnRlbnRIZWlnaHRzIiwiaW5uZXJIZWlnaHQiLCJwdXNoIiwibWF4SGVpZ2h0Q2FwdGlvbiIsIk1hdGgiLCJtYXgiLCJhcHBseSIsIm1heEhlaWdodENvbnRlbnQiLCJfbWVudUJ0biIsIl9tZW51SXRlbXMiLCJfaHRtbCIsIl9jbG9zZU1lbnUiLCJvdmVyZmxvdy15IiwiYXR0ciIsIl9vbkV2ZW50cyIsImNsaWNrIiwiX29wZW5NZW51IiwiX3BvcHVwUGFkZGluZyIsIl9idG5TaG93IiwiX2J0bkNsb3NlIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3RpbWVyIiwic2V0VGltZW91dCIsIl9jZW50ZXJXcmFwIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJvdmVyZmxvd1kiLCJwYWRkaW5nUmlnaHQiLCJfc2hvdyIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJDaG9vc2VEYXRhIiwiUGFzdGVEYXRhIiwiRGF0ZVBsYW4iLCJfaW5wdXQiLCJfcmVkaXJlY3RCdG4iLCJfZGF0YVJhZGlvIiwiX2RhdGFDaGVja2JveCIsIl9pZEl0ZW1zIiwiX2dldERhdGEiLCJfd3JpdGVJblNlc3Npb25TdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjdXJJdGVtIiwiZGF0YVNyYyIsIl93cml0ZUFsbElkIiwibG9jYXRpb24iLCJocmVmIiwiZWxlbSIsInBhcmVudHMiLCJsZW5ndGgiLCJyYXRlUGxhbiIsInNlc3Npb25UeXBlIiwidmFsdWUiLCJpcyIsIl9zZXRDaGVja2VkTmVlZElucHV0IiwidW5kZWZpbmVkIiwiaWRJdGVtcyIsInByb3AiLCJhbGxJZCIsInBhcnNlIiwia2V5IiwiaXRlbSIsIl93cml0ZURhdGFJbk9iakFmdGVyTG9hZCIsIl9jaG9zZW5EYXRhIiwiX3N0ciIsIl93cml0ZUluQmxvY2siLCJkaXZSYXRlIiwibnVtIiwiYXJyIiwic3BsaXQiLCJtaW51dGVzIiwicmVwbGFjZSIsImtleTEiLCJodG1sIiwiX3dyaXRlSW5IaWRkZW4iLCJpdGVtMSIsImtleTMiLCJpdGVtMyIsInZhbCIsIl9nZXRTZXNzaW9uRGF0YSIsInJhZGlvQ2hvb3NlIiwiY2hlY2tib3hDaG9vc2UiLCJfcmFkaW8iLCJfc2V0QWN0aXZlQ2xhc3MiLCJjaGFuZ2UiLCJwYXJlbnQiLCJmaXJzdFJhZGlvIiwidHJpZ2dlciIsImFjdGl2ZVJhZGlvIiwiRm9ybVZhbGlkYXRvciIsIl9mb3JtIiwiX2ZpZWxkc1JlcXVpcmVkIiwiX3ZhbGlkRmllbGQiLCJfY29uc3RydWN0b3IiLCJfYWRkTm90VG91Y2hlZENsYXNzIiwiX3ZhbGlkYXRlRmllbGQiLCJzdWJtaXQiLCJmb2N1cyIsImtleXByZXNzIiwia2V5dXAiLCJfbWFrZU5vdFZhbGlkIiwiZmllbGQiLCJfbWFrZVZhbGlkIiwiX3ZhbGlkYXRlRW1haWwiLCJlbWFpbCIsInJlIiwidGVzdCIsInR5cGUiLCJjaGVja1ZhbGlkIiwidmFsaWQiLCJfZmllbGRzIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUNBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRUMsS0FBTUQsRUFBRSxXQUFZLFdBRWxCLEdBQUlFLEdBQWdCRixFQUFFRyxTQUkxQkgsRUFBRUMsS0FBTUQsRUFBRSxRQUFTLFdBRWYsR0FBSUksR0FBYUosRUFBRUcsU0FJdkJILEVBQUVDLEtBQU1ELEVBQUUsdUJBQXdCLFdBRTlCLEdBQUlLLEdBQW1CTCxFQUFFRyxTQUk3QkgsRUFBRUMsS0FBTUQsRUFBRSxVQUFXLFdBRWpCLEdBQUlNLEdBQW1CTixFQUFFRyxTQUk3QkgsRUFBRUMsS0FBTUQsRUFBRSxpQkFBa0IsV0FFeEIsR0FBSU8sR0FBTVAsRUFBRUcsU0FJaEJILEVBQUUsVUFBVUMsS0FBTSxXQUVkLEdBQUlP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RUFBTWhMLFNBQVUsYUFDaEJnTCxFQUFNN0ksWUFBYSxVQUV2QjhJLEVBQWEsU0FBV0QsR0FDcEJBLEVBQU03SSxZQUFhLGFBQ25CNkksRUFBTWhMLFNBQVUsVUFFcEJrTCxFQUFpQixTQUFXQyxHQUN4QixHQUFJQyxHQUFLLHdKQUNULE9BQU9BLEdBQUdDLEtBQUtGLElBTW5CVCxFQUFpQixTQUFXTSxFQUFPL0UsR0FFL0IsR0FBSXFGLEdBQU9OLEVBQU0xRyxLQUFNLE9BQ1AwRyxHQUFNMUcsS0FBTSxRQVc1QixPQUFhLFVBQVRnSCxHQUNLSixFQUFnQkYsRUFBTXZCLFdBbUIvQndCLEdBQVlELElBbEJKRCxFQUFlQyxJQUNSLEdBd0J2QjlLLEdBQU1xTCxXQUFhLFdBQ2YsR0FBSUMsSUFBUSxDQVVaLE9BUkFDLFNBQVFuTSxLQUFNLFdBQ1ZELEVBQUdHLE1BQU8yQyxZQUFhLGVBQ25COUMsRUFBR0csTUFBT2dDLFNBQVUsZUFDcEJnSyxHQUFRLEtBS1RBLEdBR1hoQiIsImZpbGUiOiJvcmRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5jbG91ZHMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2xvdWRzQW5pbWF0ZWQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuZ3V5JyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEd1eUFuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnRfZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBDb250ZW50RnVsbEhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5wbGFucycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQbGFuc0Nob29zZUhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19oZWFkZXInKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcucG9wdXAnKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG5cbiAgICAgICAgJChkb2N1bWVudCkuYmluZCgnZ2Zvcm1fY29uZmlybWF0aW9uX2xvYWRlZCcsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICQoJy5wb3B1cF9fcmVxdWVzdCcpLmFkZENsYXNzKCdwb3B1cF9fcmVxdWVzdF9uby1iZycpO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBDbG91ZHNBbmltYXRlZCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIHZhciB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCAsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdG9wUG9zIC0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gdG9wUG9zICsgX29iai5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgeCA9ICggZW5kIC0gX3dpbmRvdy5zY3JvbGxUb3AoKSApIC8gKCBlbmQgLSAgc3RhcnQgKTtcblxuICAgICAgICAgICAgICAgIGlmICggeCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggKCB4IDwgMSApICYmICggeCA+IDAgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHg7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQtYWxsJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwLjU7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMoIHN0YXJ0LCBlbmQsIHNjcm9sbFBvaW50ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMgPSBmdW5jdGlvbiAoIHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBzY3JvbGxQb2ludCApIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtcy5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckVsZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVTdGFydCA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVGaW5pc2ggPSAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gMTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VyRWxlbS5oYXNDbGFzcygnY2xvdWRzXzEnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcm9sbFBvaW50ID09IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2Nyb2xsUG9pbnQgPT0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50IDwgMC41ICYmIHNjcm9sbFBvaW50ID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA+PSAwLjUgJiYgc2Nyb2xsUG9pbnQgPCAwLjggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCB0cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50ID49IDAuOCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBzY3JvbGxQb2ludCA9IDEuMyAtIHNjcm9sbFBvaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzY3JvbGxQb2ludCA+PSAwLjUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFNpdGUgPSAkKCcuc2l0ZScpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGhlaWdodFNpdGUgPD0gaGVpZ2h0V2luICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBHdXlBbmltYXRlZCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9oYW5kID0gX29iai5maW5kKCcuZ3V5X19oYW5kJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhbmQuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93LndpZHRoKCkgPj0gNzY4KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dIID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gX2hhbmQub2Zmc2V0KCkudG9wIC0gd2luZG93SCxcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gdG9wUG9zIC0gd2luZG93SCArIF9vYmouaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IF9oYW5kLm9mZnNldCgpLnRvcCAtIHdpbmRvd0gvMjtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gd2luZG93SC8yLjU7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgeCA9ICggZW5kIC0gX3dpbmRvdy5zY3JvbGxUb3AoKSApIC8gKCBlbmQgLSAgc3RhcnQgKTtcblxuICAgICAgICAgICAgICAgIGlmICggeCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggKCB4IDwgMSApICYmICggeCA+IDAgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHg7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQtYWxsJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMoIHN0YXJ0LCBlbmQsIHNjcm9sbFBvaW50ICk7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wV2luID1fd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRPYmogPSBfaGFuZC5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25PYmogPSBfaGFuZC5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICBpZiggKCBoZWlnaHRPYmogKyBwb3NpdGlvbk9iaiA8IGhlaWdodFdpbiArIHNjcm9sbFRvcFdpbiApICYmICQoJy5zaXRlJykuaGVpZ2h0KCkgPiBoZWlnaHRXaW4gKiAyICApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFNpdGUgPSAkKCcuc2l0ZScpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGhlaWdodFNpdGUgPD0gaGVpZ2h0V2luICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zID0gZnVuY3Rpb24gKCBzdGFydFBvaW50LCBlbmRQb2ludCwgc2Nyb2xsUG9pbnQgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudCA9IGVuZFBvaW50IC0gc3RhcnRQb2ludDtcblxuICAgICAgICAgICAgICAgIF9oYW5kLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZVN0YXJ0ID0gY3VyRWxlbS5kYXRhKCdyb3RhdGUtc3RhcnQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZUZpbmlzaCA9IGN1ckVsZW0uZGF0YSgncm90YXRlLWZpbmlzaCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAga29mUm90YXRlID0gcm90YXRlU3RhcnQgKyAoIHJvdGF0ZUZpbmlzaCAtIHJvdGF0ZVN0YXJ0ICkgLyBzZWdtZW50ICogKCBfd2luZG93LnNjcm9sbFRvcCgpIC0gc3RhcnRQb2ludCApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2Nyb2xsUG9pbnQgPT0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVGaW5pc2ggKSArJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlRmluaXNoICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY3JvbGxQb2ludCA9PSAwICkge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlU3RhcnQgKSArJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlU3RhcnQgKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1rb2ZSb3RhdGUgKSsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1rb2ZSb3RhdGUgKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQ29udGVudEZ1bGxIZWlnaHQgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckhlaWd0aCA9IF9oZWFkZXIuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmhlaWdodCggX3dpbmRvdy5oZWlnaHQoKSAtIGhlYWRlckhlaWd0aCApO1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogX29iai5maW5kKCc+ZGl2OmZpcnN0JykuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBQbGFuc0Nob29zZUhlaWdodCA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9jYXB0aW9uID0gX29iai5maW5kKCcucGxhbnNfX2xpc3RfY2FwdGlvbicpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSBfb2JqLmZpbmQoJy5wbGFuc19fbGlzdC1yb3c6bm90KC5wbGFuc19fbGlzdF9jYXB0aW9uKScpLFxuICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzID0gW10sXG4gICAgICAgICAgICBfY29udGVudEhlaWdodHMgPSBbXTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcHRpb24uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRlbnQuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgX2NhcHRpb24uZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMucHVzaCggaGVpZ2h0ICk7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0Q2FwdGlvbiA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF9jYXB0aW9uSGVpZ2h0cyk7XG5cblxuICAgICAgICAgICAgICAgIF9jb250ZW50LmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHRoaXMpLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzLnB1c2goIGhlaWdodCApO1xuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodENvbnRlbnQgPSBNYXRoLm1heC5hcHBseShNYXRoLCBfY29udGVudEhlaWdodHMpO1xuXG4gICAgICAgICAgICAgICAgX2NhcHRpb24uaW5uZXJIZWlnaHQoIG1heEhlaWdodENhcHRpb24gKTtcbiAgICAgICAgICAgICAgICBfY29udGVudC5pbm5lckhlaWdodCggbWF4SGVpZ2h0Q29udGVudCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93KSxcbiAgICAgICAgICAgIF9tZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9faGVhZGVyX19idG4nKSxcbiAgICAgICAgICAgIF9tZW51SXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXItbWVudScpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jbG9zZU1lbnUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bydcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfbWVudUl0ZW1zLmF0dHIoICdzdHlsZScsICcnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfbWVudUJ0bi5vbigge1xuXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcblxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY2hvb3NlLWRhdGEnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2hvb3NlRGF0YSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5vcmRlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQYXN0ZURhdGEoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucGxhbnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRGF0ZVBsYW4oICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgQ2hvb3NlRGF0YSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmouZmluZCgnLmNob29zZS1kYXRhX19pdGVtcycpLFxuICAgICAgICAgICAgX2lucHV0ID0gX2l0ZW1zLmZpbmQoJ2lucHV0JyksXG4gICAgICAgICAgICBfcmVkaXJlY3RCdG4gPSBfb2JqLmZpbmQoJy5idG5fbmV4dCcpLFxuICAgICAgICAgICAgX2RhdGFSYWRpbyA9IHt9LFxuICAgICAgICAgICAgX2RhdGFDaGVja2JveCA9IHt9LFxuICAgICAgICAgICAgX2lkSXRlbXMgPSB7fTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nZXREYXRhKCAkKHRoaXMpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfd3JpdGVJblNlc3Npb25TdG9yYWdlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZEl0ZW1zJywgSlNPTi5zdHJpbmdpZnkoX2lkSXRlbXMpKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3JlZGlyZWN0QnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTcmMgPSBjdXJJdGVtLmRhdGEoJ3NyYycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfd3JpdGVBbGxJZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGFTcmM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldERhdGEgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcblxuICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ3JhZGlvJyApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5wYXJlbnRzKCcucGxhbnMnKS5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUmFkaW8ucmF0ZVBsYW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblR5cGU6IGN1ckl0ZW0uZGF0YSgncmF0ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjdXJJdGVtLmF0dHIoJ3ZhbHVlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGF0YVJhZGlvW2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cigndmFsdWUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCdpZCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94JyApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5pcyhcIjpjaGVja2VkXCIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhQ2hlY2tib3hbY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCd2YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCdpZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfZGF0YUNoZWNrYm94W2N1ckl0ZW0uYXR0cignbmFtZScpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfaWRJdGVtc1tjdXJJdGVtLmF0dHIoJ25hbWUnKV07XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRDaGVja2VkTmVlZElucHV0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBpZiggbG9jYWxTdG9yYWdlLmlkSXRlbXMgIT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9pbnB1dC5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCd0eXBlJykgPT09ICdjaGVja2JveCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxJZCA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS5pZEl0ZW1zICk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5IGluIGFsbElkICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBhbGxJZFsga2V5IF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC5maWx0ZXIoJyMnKyBpdGVtICsnJykucHJvcCgnY2hlY2tlZCcsIHRydWUgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVBbGxJZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX2lucHV0LmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5pcyhcIjpjaGVja2VkXCIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCd0eXBlJykgPT09ICdyYWRpbycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWRJdGVtc1tjdXJJdGVtLmF0dHIoJ25hbWUnKV0gPSBjdXJJdGVtLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggY3VySXRlbS5hdHRyKCd0eXBlJykgPT09ICdjaGVja2JveCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5pcyhcIjpjaGVja2VkXCIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZEl0ZW1zW2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cignaWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF9pZEl0ZW1zW2N1ckl0ZW0uYXR0cignbmFtZScpXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkSXRlbXMnLCBKU09OLnN0cmluZ2lmeShfaWRJdGVtcykpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3dyaXRlRGF0YUluT2JqQWZ0ZXJMb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ3JhZGlvJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudHMoJy5wbGFucycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YVJhZGlvLnJhdGVQbGFuID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblR5cGU6IGN1ckl0ZW0uZGF0YSgncmF0ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1ckl0ZW0uYXR0cigndmFsdWUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YVJhZGlvW2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cigndmFsdWUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94JyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFDaGVja2JveFtjdXJJdGVtLmF0dHIoJ25hbWUnKV0gPSBjdXJJdGVtLmF0dHIoJ3ZhbHVlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfZGF0YUNoZWNrYm94W2N1ckl0ZW0uYXR0cignbmFtZScpXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3dyaXRlSW5TZXNzaW9uU3RvcmFnZSgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3dyaXRlSW5TZXNzaW9uU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JhZGlvQ2hvb3NlJywgSlNPTi5zdHJpbmdpZnkoX2RhdGFSYWRpbykpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaGVja2JveENob29zZScsIEpTT04uc3RyaW5naWZ5KF9kYXRhQ2hlY2tib3gpKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldENoZWNrZWROZWVkSW5wdXQoKTtcbiAgICAgICAgICAgICAgICBfd3JpdGVEYXRhSW5PYmpBZnRlckxvYWQoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFBhc3RlRGF0YSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9jaG9zZW5EYXRhID0gX29iai5maW5kKCcub3JkZXJfX2Nob3Nlbi1kYXRhIHNwYW4nKSxcbiAgICAgICAgICAgIF9kYXRhUmFkaW8sXG4gICAgICAgICAgICBfZGF0YUNoZWNrYm94LFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCdpbnB1dCNpbnB1dF8xXzUnKSxcbiAgICAgICAgICAgIF9hcnIgPSBbXSxcbiAgICAgICAgICAgIF9zdHIgPSAnJztcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkJsb2NrID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGl2UmF0ZSA9ICcnLFxuICAgICAgICAgICAgICAgICAgICBudW0gPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkgaW4gX2RhdGFSYWRpbyAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfZGF0YVJhZGlvWyBrZXkgXTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBfZGF0YVJhZGlvLnJhdGVQbGFuICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIF9kYXRhUmFkaW8ucmF0ZVBsYW4sIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfZGF0YVJhZGlvLnJhdGVQbGFuLnZhbHVlLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZGF0YVJhZGlvLnJhdGVQbGFuLnNlc3Npb25UeXBlID09PSAnc2Vzc2lvbiBwcmljaW5nJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdlJhdGUgPSAnPHNwYW4+JysgX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSArJyAoJysgdmFsdWVbMF0gKycgc2Vzc2lvbnMpPC9zcGFuPic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSA9PT0gJ21pbnV0ZSBwcmljaW5nJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gdmFsdWVbMF0ucmVwbGFjZSgvW14wLTldKy9nLCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBtaW51dGVzID4gMTAwMDAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBtaW51dGVzLzEwMDAwMDAgKyAnTSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdlJhdGUgPSAnPHNwYW4+JysgX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSArJyAoJysgbWludXRlcyArJyBtaW51dGVzICgnICsgdmFsdWVbMl0gKyAnL21pbnV0ZSk8L3NwYW4+JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5MSBpbiBfZGF0YUNoZWNrYm94ICApIHtcblxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChrZXkxKVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGFyci5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBhcnIubGVuZ3RoID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9ICcrICcgKyBhcnIubGVuZ3RoICsgJyBzZXJ2aWNlJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAnKyAnICsgYXJyLmxlbmd0aCArICcgc2VydmljZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2Nob3NlbkRhdGEuaHRtbCgnWW91IGNob3NlICcgKyBkaXZSYXRlICsgJywgJyArIGl0ZW0gKyAnICcgKyBudW0gKyAnKS4nKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF93cml0ZUluSGlkZGVuID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3RyID0gJyc7XG5cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkgaW4gX2RhdGFSYWRpbyAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfZGF0YVJhZGlvWyBrZXkgXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc3RyICs9ICcnKyBpdGVtICsnOyAnXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIGtleTEgaW4gaXRlbSAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTEgPSBpdGVtWyBrZXkxIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RyICs9ICcnKyBpdGVtMSArJzsgJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5MyBpbiBfZGF0YUNoZWNrYm94ICApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbTMgPSBfZGF0YUNoZWNrYm94WyBrZXkzIF07XG5cbiAgICAgICAgICAgICAgICAgICAgX3N0ciArPSAnJysgaXRlbTMgKyc7ICdcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9zdHIgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTZXNzaW9uRGF0YSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2RhdGFSYWRpbyA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSApO1xuICAgICAgICAgICAgICAgICAgICBfZGF0YUNoZWNrYm94ID0gSlNPTi5wYXJzZSggbG9jYWxTdG9yYWdlLmNoZWNrYm94Q2hvb3NlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3dyaXRlSW5IaWRkZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgX3dyaXRlSW5CbG9jaygpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQoJ2JvZHknKS5kYXRhKCdzcmMnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2dldFNlc3Npb25EYXRhKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBEYXRlUGxhbiA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmouZmluZCgnLnBsYW5zX19pdGVtJyksXG4gICAgICAgICAgICBfcmFkaW8gPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRBY3RpdmVDbGFzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfcmFkaW8ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50cygnLnBsYW5zX19pdGVtJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhKCBwYXJlbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlbXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2l0ZW1zLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UmFkaW8gPSBjdXJJdGVtLmZpbmQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXTpmaXJzdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggISggY3VySXRlbS5oYXNDbGFzcygnYWN0aXZlJykgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVtcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RSYWRpby50cmlnZ2VyKCdjbGljaycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRBY3RpdmVDbGFzcyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVJhZGlvID0gX3JhZGlvLmZpbHRlcignOmNoZWNrZWQnKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gYWN0aXZlUmFkaW8ucGFyZW50cygnLnBsYW5zX19pdGVtJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iLCIoIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICAkLmVhY2goICQoJy5vcmRlcl9fcGxhY2UnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRvciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuXG4gICAgfSApO1xuXG4gICAgdmFyIEZvcm1WYWxpZGF0b3IgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfZm9ybSA9ICBfb2JqLmZpbmQoJ2Zvcm0nKSxcbiAgICAgICAgICAgIF9maWVsZHNSZXF1aXJlZCA9IF9vYmouZmluZCgnaW5wdXRbZGF0YS1yZXF1aXJlZD1cInJlcXVpcmVkXCJdLCB0ZXh0YXJlYVtkYXRhLXJlcXVpcmVkPVwicmVxdWlyZWRcIl0sIGlucHV0W2FyaWEtcmVxdWlyZWQ9XCJ0cnVlXCJdLCB0ZXh0YXJlYVthcmlhLXJlcXVpcmVkPVwidHJ1ZVwiXScpLFxuICAgICAgICAgICAgX3ZhbGlkRmllbGQgPSBfb2JqLmZpbmQoJ2lucHV0W2RhdGEtdmFsaWRhdGlvbj1cInZhbGlkXCJdJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyXG4gICAgICAgICAgICBfY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkTm90VG91Y2hlZENsYXNzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2ZpZWxkc1JlcXVpcmVkLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09PSAnJyApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCAnbm90LXRvdWNoZWQnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF92YWxpZEZpZWxkLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICBfdmFsaWRhdGVGaWVsZCggJCggdGhpcyApICk7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfZm9ybS5vbigge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uKCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2ZpZWxkc1JlcXVpcmVkLmhhc0NsYXNzKCdub3QtdG91Y2hlZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcubm90LXRvdWNoZWQ6Zmlyc3QnKS5mb2N1cygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gaWYoIF92YWxpZEZpZWxkLmhhc0NsYXNzKCdub3QtdmFsaWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLm5vdC12YWxpZDpmaXJzdCcpLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9maWVsZHNSZXF1aXJlZC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXlwcmVzczogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3ZhbGlkRmllbGQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsaWRhdGVGaWVsZCggJCggdGhpcyApICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWFrZU5vdFZhbGlkID0gZnVuY3Rpb24gKCBmaWVsZCApIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5hZGRDbGFzcyggJ25vdC12YWxpZCcgKTtcbiAgICAgICAgICAgICAgICBmaWVsZC5yZW1vdmVDbGFzcyggJ3ZhbGlkJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tYWtlVmFsaWQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xuICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUNsYXNzKCAnbm90LXZhbGlkJyApO1xuICAgICAgICAgICAgICAgIGZpZWxkLmFkZENsYXNzKCAndmFsaWQnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3ZhbGlkYXRlRW1haWwgPSBmdW5jdGlvbiAoIGVtYWlsICkge1xuICAgICAgICAgICAgICAgIHZhciByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICAgICAgICAgICAgICAgIHJldHVybiByZS50ZXN0KGVtYWlsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdmFsaWRhdGVQaG9uZSA9IGZ1bmN0aW9uICggcGhvbmUgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlID0gL14oPzpcXChcXGR7M31cXCl8XFxkezN9KVstIF0/XFxkezN9Wy0gXT9cXGR7NH0kLztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmUudGVzdChwaG9uZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQgPSBmdW5jdGlvbiAoIGZpZWxkLCBlICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWVsZC5hdHRyKCAndHlwZScpLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBmaWVsZC5hdHRyKCAnY2xhc3MnKTtcblxuICAgICAgICAgICAgICAgIC8vaWYoIHR5cGUgPT09ICdlbWFpbCcgfHwgdHlwZSA9PT0gJ3RleHQnICl7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICBpZiggZmllbGQudmFsKCkgPT09ICcnICl7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnICl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX3ZhbGlkYXRlRW1haWwoIGZpZWxkLnZhbCgpICkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2lmKCBjbGFzc05hbWUuaW5kZXhPZignc2l0ZV9faW5wdXRfcGhvbmUnKSArIDEgKXtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgIGlmKCBmaWVsZC52YWwoKSAhPSAnJyApIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgICBpZiggIV92YWxpZGF0ZVBob25lKCBmaWVsZC52YWwoKSApICl7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICBfbWFrZU5vdFZhbGlkKCBmaWVsZCApO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgIF9tYWtlVmFsaWQoIGZpZWxkICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcbiAgICAgICAgX3NlbGYuY2hlY2tWYWxpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG5cbiAgICAgICAgICAgIF9maWVsZHMuZWFjaCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoIHRoaXMgKS5yZW1vdmVDbGFzcyggJ25vdC10b3VjaGVkJyApO1xuICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdub3QtdmFsaWQnICkgKXtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xuICAgIH07XG5cbn0gKSgpO1xuXG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
