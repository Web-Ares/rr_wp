"use strict";!function(){$(function(){$.each($(".learn-more"),function(){new t($(this))}),$.each($(".site__anchors"),function(){new n($(this))}),$.each($(".host__offer"),function(){new e($(this))})});var t=function(t){var n=this,e=t,o=$("html, body"),i=e,a=function(){i.on({click:function(){return c($(this)),!1}})},c=function(t){var n=t,e=n.parents('[data-more="true"]'),i=e.next(),a=i.offset().top;o.animate({scrollTop:a},300)},f=function(){e[0].obj=n,a()};f()},n=function(t){var n=this,e=t,o=$("html, body"),i=$(window),a=$('[data-anchor="true"]'),c=function(){e.find("a").on({click:function(){return r($(this)),!1}}),i.on({scroll:function(){f()}})},f=function(){var t=i.scrollTop();a.each(function(){var n=$(this),o=n.index(),a=n.offset().top;t+i.height()/2>=a&&n.innerHeight()+a>=t+i.height()/2&&(e.find("a").removeClass("active"),e.find("a").eq(o).addClass("active"))})},r=function(t){var n=t,e=n.index(),i=a.eq(e),c=i.offset().top;o.animate({scrollTop:c},300)},s=function(){e[0].obj=n,c(),f()};s()},e=function(t){var n=this,e=t,o=e.find(".host__offer-date"),i=function(){},a=function(t,n){var e=new Date(t.getTime());(new Date).getHours()>=17&&(new Date).getMinutes()>0&&t.getDay()==n?e.setDate(t.getDate()+(7+n-t.getDay())%7+7):e.setDate(t.getDate()+(7+n-t.getDay())%7),o.html(""+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear())},c=function(){e[0].obj=n,i(),a(new Date,5)};c()}}();
"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".site__content_full"),function(){new o($(this))}),$.each($(".plans"),function(){new i($(this))}),$.each($(".site__header"),function(){new e($(this))}),$(".popup").each(function(){new s($(this))})});var t=function(t){var n=this,o=t,i=o,e=$(window),s=(e.width(),function(){e.on({resize:function(){r(),a()},load:function(){a()},scroll:function(){a()}})}),a=function(){var t,n=o.offset().top,i=n-e.height(),s=n+o.height(),a=(s-e.scrollTop())/(s-i);a>1?t=0:a<0&&(t=1),a<1&&a>0&&(t=1-a),o.hasClass("putted-all")&&(t=.5),c(i,s,t)},c=function(t,n,o){i.each(function(){var t=$(this),n=100,i=1;t.hasClass("clouds_1")&&(i=-1),0==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):1==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):(o>=.5&&(o=1-o),t.css({"-webkit-transform":"translateX("+200*o*i+"%)",transform:"translateX("+200*o*i+"%)"}))})},r=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},h=function(){o[0].obj=n,s(),r()};h()},n=function(t){var n=this,o=t,i=o.find(".guy__hand"),e=$(window),s=e.width(),a=function(){e.on({resize:function(){s!=e.width()&&(s=e.width()+1,e.width()<768&&i.css({"-webkit-transform":"none",transform:"none"})),h(),r(),c()},load:function(){e.width()>=768&&c()},scroll:function(){e.width()>=768&&c()}})},c=function(){var t,n=e.height(),s=o.offset().top,a=i.offset().top-n,c=s-n+o.height();o.hasClass("putted")&&(a=i.offset().top-n/2,c=n/2.5);var r=(c-e.scrollTop())/(c-a);r>1?t=0:r<0&&(t=1),r<1&&r>0&&(t=1-r),o.hasClass("putted-all")&&(t=1),f(a,c,t)},r=function(){var t=e.height(),n=e.scrollTop(),s=i.height(),a=i.offset().top;s+a<t+n&&$(".site").height()>2*t?o.addClass("putted"):o.removeClass("putted")},h=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},f=function(t,n,o){var s=n-t;i.each(function(){var n=$(this),i=n.data("rotate-start"),a=n.data("rotate-finish"),c=i+(a-i)/s*(e.scrollTop()-t);1==o?n.css({"-webkit-transform":"rotate( "+-a+"deg )",transform:"rotate( "+-a+"deg )"}):0==o?n.css({"-webkit-transform":"rotate( "+-i+"deg )",transform:"rotate( "+-i+"deg )"}):n.css({"-webkit-transform":"rotate( "+-c+"deg )",transform:"rotate( "+-c+"deg )"})})},u=function(){o[0].obj=n,a(),r(),h()};u()},o=function(t){var n=this,o=t,i=$(window),e=$(".site__header"),s=function(){i.on({resize:function(){a()}})},a=function(){var t=e.height();o.height(i.height()-t),o.css({"min-height":o.find(">div:first").height()})},c=function(){o[0].obj=n,s(),a()};c()},i=function(t){var n=this,o=t,i=$(window),e=o.find(".plans__list_caption"),s=o.find(".plans__list-row:not(.plans__list_caption)"),a=[],c=[],r=function(){i.on({load:function(){i.width()>=1024&&h()},resize:function(){i.width()<1024?(e.css({height:""}),s.css({height:""})):h()}})},h=function(){a=[],c=[],e.each(function(){var t=$(this).innerHeight();a.push(t)});var t=Math.max.apply(Math,a);s.each(function(){var t=$(this).innerHeight();c.push(t)});var n=Math.max.apply(Math,c);e.innerHeight(t),s.innerHeight(n)},f=function(){o[0].obj=n,r()};f()},e=function(t){var n=this,o=t,i=$(window),e=o.find(".site__header__btn"),s=o.find(".site__header-menu"),a=$("html"),c=function(){o.removeClass("opened"),a.css({"overflow-y":"auto"}),s.attr("style","")},r=function(){i.on({scroll:function(){i.scrollTop()>0?o.addClass("fixed"):o.removeClass("fixed")},resize:function(){}}),e.on({click:function(){return o.hasClass("opened")?c():h(),!1}})},h=function(){o.addClass("opened"),a.css({"overflow-y":"hidden"})},f=function(){r(),o[0].obj=n,i.scrollTop()>o.innerHeight()/2?o.addClass("fixed"):o.removeClass("fixed")};f()},s=function(t){var n=this,o=40,i=$(".popup__open"),e=t,s=e.find(".popup__close, .popup__cancel"),a=e.find(".popup__wrap"),c=e.find(".popup__content"),r=$("html"),h=$(window),f=setTimeout(function(){},1),u=function(){h.height()-2*o-a.height()>0?a.css({top:(h.height()-2*o-a.height())/2}):a.css({top:0})},d=function(){var t,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t},l=function(){e.css({overflowY:"hidden"}),r.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),f=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},p=function(){e[0].obj=n,w()},w=function(){h.on({resize:function(){u()}}),i.on({click:function(){return _($(this).attr("data-popup")),!1}}),a.on({click:function(t){t.stopPropagation()}}),e.on({click:function(){return l(),!1}}),s.on({click:function(){return l(),!1}})},_=function(t){g(t),r.css({overflowY:"hidden",paddingRight:d()}),e.addClass("popup_opened"),u()},g=function(t){var n=c.filter(".popup__"+t);c.css({display:"none"}),n.css({display:"block"})};p()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2Nyb2xsRG93biIsInRoaXMiLCJBbmNob3JzIiwiSG9zdE9mZmVyIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX2RvbSIsIl9idG5MZWFybk1vcmUiLCJfYWRkRXZlbnRzIiwib24iLCJjbGljayIsIl9maW5kTmVlZEJsb2NrIiwiYnRuIiwiY2xpY2tCdG4iLCJwYXJlbnRCbG9jayIsInBhcmVudHMiLCJuZXh0QmxvY2siLCJuZXh0IiwibmV4dEJsb2NrUG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiX2luaXQiLCJfd2luZG93Iiwid2luZG93IiwiX2l0ZW1zIiwiZmluZCIsInNjcm9sbCIsIl9jaGFuZ2VBY3RpdmVBbmNob3JzIiwiY3VyRWxlbSIsImN1ckVsZW1JbmRleCIsImluZGV4IiwiY3VyRWxlbVBvcyIsImhlaWdodCIsImlubmVySGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJlcSIsImFkZENsYXNzIiwibmVlZEJsb2NrIiwibmVlZEJsb2NrUG9zaXRpb24iLCJfZGF0ZSIsIl9zZXROZWVkZWREYXkiLCJkYXRlIiwiZGF5T2ZXZWVrIiwicmVzdWx0RGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0RGF5Iiwic2V0RGF0ZSIsImdldERhdGUiLCJodG1sIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsIkNsb3Vkc0FuaW1hdGVkIiwiR3V5QW5pbWF0ZWQiLCJDb250ZW50RnVsbEhlaWdodCIsIlBsYW5zQ2hvb3NlSGVpZ2h0IiwiTWVudSIsIlBvcHVwIiwid2lkdGgiLCJyZXNpemUiLCJfY2hlY2tQdXRJbldpbmRvdyIsIl9jaGVja1Njcm9sbCIsImxvYWQiLCJzY3JvbGxQb2ludCIsInRvcFBvcyIsInN0YXJ0IiwiZW5kIiwieCIsImhhc0NsYXNzIiwiX2FuaW1hdGlvbkVsZW1zIiwic3RhcnRQb2ludCIsImVuZFBvaW50IiwidHJhbnNsYXRlRmluaXNoIiwiY3NzIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJoZWlnaHRXaW4iLCJoZWlnaHRTaXRlIiwiX2hhbmQiLCJfZ2xvYmFsV2lkdGgiLCJfY2hlY2tHZXRJbldpbmRvdyIsIndpbmRvd0giLCJzY3JvbGxUb3BXaW4iLCJoZWlnaHRPYmoiLCJwb3NpdGlvbk9iaiIsInNlZ21lbnQiLCJyb3RhdGVTdGFydCIsImRhdGEiLCJyb3RhdGVGaW5pc2giLCJrb2ZSb3RhdGUiLCJfaGVhZGVyIiwiX3NldEhlaWdodCIsImhlYWRlckhlaWd0aCIsIm1pbi1oZWlnaHQiLCJfY2FwdGlvbiIsIl9jb250ZW50IiwiX2NhcHRpb25IZWlnaHRzIiwiX2NvbnRlbnRIZWlnaHRzIiwicHVzaCIsIm1heEhlaWdodENhcHRpb24iLCJNYXRoIiwibWF4IiwiYXBwbHkiLCJtYXhIZWlnaHRDb250ZW50IiwiX21lbnVCdG4iLCJfbWVudUl0ZW1zIiwiX2h0bWwiLCJfY2xvc2VNZW51Iiwib3ZlcmZsb3cteSIsImF0dHIiLCJfb25FdmVudHMiLCJfb3Blbk1lbnUiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJzZXRUaW1lb3V0IiwiX2NlbnRlcldyYXAiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX3Nob3ciLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNw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QURBOEgsTUFDTyxNQUluQkcsRUFBUSxTQUFVVCxHQUNkWSxFQUFrQlosR0FFbEJULEVBQWlCNUMsS0FDYjRELFVBQVcsU0FDWEMsYUFBY2IsTUFFbEJ4SCxFQUFLaUMsU0FBVSxnQkFDZnNGLEtBR0prQixFQUFtQixTQUFVWixHQUN6QixHQUFJYSxHQUFhdkIsRUFBVXdCLE9BQVEsV0FBYWQsRUFFaERWLEdBQVUzQyxLQUFPb0UsUUFBUyxTQUMxQkYsRUFBV2xFLEtBQU9vRSxRQUFTLFVBUW5DMUgiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcubGVhcm4tbW9yZScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxEb3duKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2FuY2hvcnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQW5jaG9ycyggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5ob3N0X19vZmZlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBIb3N0T2ZmZXIoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU2Nyb2xsRG93biA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2RvbSA9ICQoICdodG1sLCBib2R5JyApLFxuICAgICAgICAgICAgX2J0bkxlYXJuTW9yZSA9IF9vYmo7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfYnRuTGVhcm5Nb3JlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbmROZWVkQmxvY2soICQodGhpcykgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2ZpbmROZWVkQmxvY2sgPSBmdW5jdGlvbiggYnRuICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsaWNrQnRuID0gYnRuLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRCbG9jayA9IGNsaWNrQnRuLnBhcmVudHMoJ1tkYXRhLW1vcmU9XCJ0cnVlXCJdJyksXG4gICAgICAgICAgICAgICAgICAgIG5leHRCbG9jayA9IHBhcmVudEJsb2NrLm5leHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJsb2NrUG9zaXRpb24gPSBuZXh0QmxvY2sub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7IHNjcm9sbFRvcDogbmV4dEJsb2NrUG9zaXRpb24gfSwgMzAwICk7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBBbmNob3JzID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfZG9tID0gJCggJ2h0bWwsIGJvZHknICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2l0ZW1zICA9ICQoJ1tkYXRhLWFuY2hvcj1cInRydWVcIl0nKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnYScpLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpbmROZWVkQmxvY2soICQodGhpcykgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hhbmdlQWN0aXZlQW5jaG9ycygpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hhbmdlQWN0aXZlQW5jaG9ycyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgICAgICBfaXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckVsZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbUluZGV4ID0gY3VyRWxlbS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbVBvcyA9IGN1ckVsZW0ub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAoICggc2Nyb2xsVG9wICsgX3dpbmRvdy5oZWlnaHQoKS8yICkgPj0gY3VyRWxlbVBvcyApICYmICggKCBjdXJFbGVtLmlubmVySGVpZ2h0KCkgKyBjdXJFbGVtUG9zICkgPj0gc2Nyb2xsVG9wICsgX3dpbmRvdy5oZWlnaHQoKS8yICkgICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2EnKS5lcShjdXJFbGVtSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZmluZE5lZWRCbG9jayA9IGZ1bmN0aW9uKCBidG4gKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xpY2tCdG4gPSBidG4sXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gY2xpY2tCdG4uaW5kZXgoKSxcbiAgICAgICAgICAgICAgICAgICAgbmVlZEJsb2NrID0gX2l0ZW1zLmVxKGluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgbmVlZEJsb2NrUG9zaXRpb24gPSBuZWVkQmxvY2sub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7IHNjcm9sbFRvcDogbmVlZEJsb2NrUG9zaXRpb24gfSwgMzAwICk7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZUFuY2hvcnMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEhvc3RPZmZlciA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2RhdGUgID0gX29iai5maW5kKCcuaG9zdF9fb2ZmZXItZGF0ZScpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldE5lZWRlZERheSA9IGZ1bmN0aW9uKCAgZGF0ZSwgZGF5T2ZXZWVrICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdERhdGUgPSBuZXcgRGF0ZSggZGF0ZS5nZXRUaW1lKCkgKTtcblxuICAgICAgICAgICAgICAgIGlmKCAoIG5ldyBEYXRlKCkuZ2V0SG91cnMoKSA+PSAxNyApICYmICggbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgPiAwICkgJiYgKCBkYXRlLmdldERheSgpID09IGRheU9mV2VlayApICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdERhdGUuc2V0RGF0ZSggKGRhdGUuZ2V0RGF0ZSgpICsgKCA3ICsgZGF5T2ZXZWVrIC0gZGF0ZS5nZXREYXkoKSApICUgNyApICsgNyApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRlLnNldERhdGUoIGRhdGUuZ2V0RGF0ZSgpICsgKCA3ICsgZGF5T2ZXZWVrIC0gZGF0ZS5nZXREYXkoKSApICUgNyApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2RhdGUuaHRtbCggJycrIChyZXN1bHREYXRlLmdldE1vbnRoKCkgKyAxKSArJy8nKyAocmVzdWx0RGF0ZS5nZXREYXRlKCkpICsnLycrIChyZXN1bHREYXRlLmdldEZ1bGxZZWFyKCkpICsnJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0TmVlZGVkRGF5KCBuZXcgRGF0ZSgpLCA1ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5jbG91ZHMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2xvdWRzQW5pbWF0ZWQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuZ3V5JyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEd1eUFuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2NvbnRlbnRfZnVsbCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBDb250ZW50RnVsbEhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5wbGFucycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQbGFuc0Nob29zZUhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19oZWFkZXInKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcucG9wdXAnKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIENsb3Vkc0FuaW1hdGVkID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2l0ZW1zID0gX29iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wICxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSB0b3BQb3MgLSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBlbmQgPSB0b3BQb3MgKyBfb2JqLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgIHZhciB4ID0gKCBlbmQgLSBfd2luZG93LnNjcm9sbFRvcCgpICkgLyAoIGVuZCAtICBzdGFydCApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB4ID4gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDA7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHggPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCAoIHggPCAxICkgJiYgKCB4ID4gMCApICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0geDtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZC1hbGwnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDAuNTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyggc3RhcnQsIGVuZCwgc2Nyb2xsUG9pbnQgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyA9IGZ1bmN0aW9uICggc3RhcnRQb2ludCwgZW5kUG9pbnQsIHNjcm9sbFBvaW50ICkge1xuXG4gICAgICAgICAgICAgICAgX2l0ZW1zLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVN0YXJ0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZUZpbmlzaCA9IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJFbGVtLmhhc0NsYXNzKCdjbG91ZHNfMScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2Nyb2xsUG9pbnQgPT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY3JvbGxQb2ludCA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPCAwLjUgJiYgc2Nyb2xsUG9pbnQgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50ID49IDAuNSAmJiBzY3JvbGxQb2ludCA8IDAuOCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCB0cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPj0gMC44ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIHNjcm9sbFBvaW50ID0gMS4zIC0gc2Nyb2xsUG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFBvaW50ID49IDAuNSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0U2l0ZSA9ICQoJy5zaXRlJykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiggaGVpZ2h0U2l0ZSA8PSBoZWlnaHRXaW4gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEd1eUFuaW1hdGVkID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2hhbmQgPSBfb2JqLmZpbmQoJy5ndXlfX2hhbmQnKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGFuZC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF93aW5kb3cud2lkdGgoKSA+PSA3NjgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBfaGFuZC5vZmZzZXQoKS50b3AgLSB3aW5kb3dILFxuICAgICAgICAgICAgICAgICAgICBlbmQgPSB0b3BQb3MgLSB3aW5kb3dIICsgX29iai5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gX2hhbmQub2Zmc2V0KCkudG9wIC0gd2luZG93SC8yO1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSB3aW5kb3dILzIuNTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB4ID0gKCBlbmQgLSBfd2luZG93LnNjcm9sbFRvcCgpICkgLyAoIGVuZCAtICBzdGFydCApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB4ID4gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDA7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHggPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCAoIHggPCAxICkgJiYgKCB4ID4gMCApICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0geDtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZC1hbGwnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyggc3RhcnQsIGVuZCwgc2Nyb2xsUG9pbnQgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3BXaW4gPV93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodE9iaiA9IF9oYW5kLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbk9iaiA9IF9oYW5kLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgIGlmKCAoIGhlaWdodE9iaiArIHBvc2l0aW9uT2JqIDwgaGVpZ2h0V2luICsgc2Nyb2xsVG9wV2luICkgJiYgJCgnLnNpdGUnKS5oZWlnaHQoKSA+IGhlaWdodFdpbiAqIDIgICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0U2l0ZSA9ICQoJy5zaXRlJykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiggaGVpZ2h0U2l0ZSA8PSBoZWlnaHRXaW4gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMgPSBmdW5jdGlvbiAoIHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBzY3JvbGxQb2ludCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBzZWdtZW50ID0gZW5kUG9pbnQgLSBzdGFydFBvaW50O1xuXG4gICAgICAgICAgICAgICAgX2hhbmQuZWFjaCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlU3RhcnQgPSBjdXJFbGVtLmRhdGEoJ3JvdGF0ZS1zdGFydCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlRmluaXNoID0gY3VyRWxlbS5kYXRhKCdyb3RhdGUtZmluaXNoJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrb2ZSb3RhdGUgPSByb3RhdGVTdGFydCArICggcm90YXRlRmluaXNoIC0gcm90YXRlU3RhcnQgKSAvIHNlZ21lbnQgKiAoIF93aW5kb3cuc2Nyb2xsVG9wKCkgLSBzdGFydFBvaW50ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxQb2ludCA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZUZpbmlzaCApICsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVGaW5pc2ggKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjcm9sbFBvaW50ID09IDAgKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVTdGFydCApICsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVTdGFydCApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLWtvZlJvdGF0ZSApKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLWtvZlJvdGF0ZSApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBDb250ZW50RnVsbEhlaWdodCA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVySGVpZ3RoID0gX2hlYWRlci5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIF9vYmouaGVpZ2h0KCBfd2luZG93LmhlaWdodCgpIC0gaGVhZGVySGVpZ3RoICk7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiBfb2JqLmZpbmQoJz5kaXY6Zmlyc3QnKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFBsYW5zQ2hvb3NlSGVpZ2h0ID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2NhcHRpb24gPSBfb2JqLmZpbmQoJy5wbGFuc19fbGlzdF9jYXB0aW9uJyksXG4gICAgICAgICAgICBfY29udGVudCA9IF9vYmouZmluZCgnLnBsYW5zX19saXN0LXJvdzpub3QoLnBsYW5zX19saXN0X2NhcHRpb24pJyksXG4gICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMgPSBbXSxcbiAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cyA9IFtdO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FwdGlvbi5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGVudC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzID0gW107XG4gICAgICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzID0gW107XG5cbiAgICAgICAgICAgICAgICBfY2FwdGlvbi5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCh0aGlzKS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cy5wdXNoKCBoZWlnaHQgKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXhIZWlnaHRDYXB0aW9uID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX2NhcHRpb25IZWlnaHRzKTtcblxuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnQuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfY29udGVudEhlaWdodHMucHVzaCggaGVpZ2h0ICk7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0Q29udGVudCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF9jb250ZW50SGVpZ2h0cyk7XG5cbiAgICAgICAgICAgICAgICBfY2FwdGlvbi5pbm5lckhlaWdodCggbWF4SGVpZ2h0Q2FwdGlvbiApO1xuICAgICAgICAgICAgICAgIF9jb250ZW50LmlubmVySGVpZ2h0KCBtYXhIZWlnaHRDb250ZW50ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cpLFxuICAgICAgICAgICAgX21lbnVCdG4gPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXJfX2J0bicpLFxuICAgICAgICAgICAgX21lbnVJdGVtcyA9IF9vYmouZmluZCgnLnNpdGVfX2hlYWRlci1tZW51JyksXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9tZW51SXRlbXMuYXR0ciggJ3N0eWxlJywgJycgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9tZW51QnRuLm9uKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdvcGVuZWQnICk7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcblxuICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID4gX29iai5pbm5lckhlaWdodCgpLzIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuU2hvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
