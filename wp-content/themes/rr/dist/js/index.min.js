"use strict";!function(){$(function(){$.each($(".learn-more"),function(){new t($(this))}),$.each($(".site__anchors"),function(){new n($(this))}),$.each($(".host__offer"),function(){new e($(this))})});var t=function(t){var n=this,e=t,o=$("html, body"),i=e,a=function(){i.on({click:function(){return c($(this)),!1}})},c=function(t){var n=t,e=n.parents('[data-more="true"]'),i=e.next(),a=i.offset().top;o.animate({scrollTop:a},300)},f=function(){e[0].obj=n,a()};f()},n=function(t){var n=this,e=t,o=$("html, body"),i=$(window),a=$('[data-anchor="true"]'),c=function(){e.find("a").on({click:function(){return r($(this)),!1}}),i.on({scroll:function(){f()}})},f=function(){var t=i.scrollTop();a.each(function(){var n=$(this),o=n.index(),a=n.offset().top;t+i.height()/2>=a&&n.innerHeight()+a>=t+i.height()/2&&(e.find("a").removeClass("active"),e.find("a").eq(o).addClass("active"))})},r=function(t){var n=t,e=n.index(),i=a.eq(e),c=i.offset().top;o.animate({scrollTop:c},300)},s=function(){e[0].obj=n,c(),f()};s()},e=function(t){var n=this,e=t,o=e.find(".host__offer-date"),i=function(){},a=function(t,n){var e=new Date(t.getTime());17==(new Date).getHours()&&(new Date).getMinutes()>0?e.setDate(t.getDate()+(7+n-t.getDay())%7+7):e.setDate(t.getDate()+(7+n-t.getDay())%7),o.html(""+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear())},c=function(){e[0].obj=n,i(),a(new Date,5)};c()}}();
"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".site__content_full"),function(){new i($(this))}),$.each($(".plans"),function(){new s($(this))})});var t=function(t){var n=this,i=t,s=i,o=$(window),a=(o.width(),function(){o.on({resize:function(){h(),e()},load:function(){e()},scroll:function(){e()}})}),e=function(){var t,n=i.offset().top,s=n-o.height(),a=n+i.height(),e=(a-o.scrollTop())/(a-s);e>1?t=0:e<0&&(t=1),e<1&&e>0&&(t=1-e),i.hasClass("putted-all")&&(t=.5),r(s,a,t)},r=function(t,n,i){s.each(function(){var t=$(this),n=100,s=1;t.hasClass("clouds_1")&&(s=-1),0==i?t.css({"-webkit-transform":"translateX("+-n*s+"%)",transform:"translateX("+-n*s+"%)"}):1==i?t.css({"-webkit-transform":"translateX("+-n*s+"%)",transform:"translateX("+-n*s+"%)"}):(i>=.5&&(i=1-i),t.css({"-webkit-transform":"translateX("+200*i*s+"%)",transform:"translateX("+200*i*s+"%)"}))})},h=function(){var t=o.height(),n=$(".site").height();n<=t?i.addClass("putted-all"):i.removeClass("putted-all")},f=function(){i[0].obj=n,a(),h()};f()},n=function(t){var n=this,i=t,s=i.find(".guy__hand"),o=$(window),a=o.width(),e=function(){o.on({resize:function(){a!=o.width()&&(a=o.width()+1,o.width()<768&&s.css({"-webkit-transform":"none",transform:"none"})),f(),h(),r()},load:function(){o.width()>=768&&r()},scroll:function(){o.width()>=768&&r()}})},r=function(){var t,n=o.height(),a=i.offset().top,e=s.offset().top-n,r=a-n+i.height();i.hasClass("putted")&&(e=s.offset().top-n/2,r=n/2.5);var h=(r-o.scrollTop())/(r-e);h>1?t=0:h<0&&(t=1),h<1&&h>0&&(t=1-h),i.hasClass("putted-all")&&(t=1),c(e,r,t)},h=function(){var t=o.height(),n=o.scrollTop(),a=s.height(),e=s.offset().top;a+e<t+n&&$(".site").height()>2*t?i.addClass("putted"):i.removeClass("putted")},f=function(){var t=o.height(),n=$(".site").height();n<=t?i.addClass("putted-all"):i.removeClass("putted-all")},c=function(t,n,i){var a=n-t;s.each(function(){var n=$(this),s=n.data("rotate-start"),e=n.data("rotate-finish"),r=s+(e-s)/a*(o.scrollTop()-t);1==i?n.css({"-webkit-transform":"rotate( "+-e+"deg )",transform:"rotate( "+-e+"deg )"}):0==i?n.css({"-webkit-transform":"rotate( "+-s+"deg )",transform:"rotate( "+-s+"deg )"}):n.css({"-webkit-transform":"rotate( "+-r+"deg )",transform:"rotate( "+-r+"deg )"})})},u=function(){i[0].obj=n,e(),h(),f()};u()},i=function(t){var n=this,i=t,s=$(window),o=$(".site__header"),a=function(){s.on({resize:function(){e()}})},e=function(){var t=o.height();i.height(s.height()-t),i.css({"min-height":i.find(">div:first").height()})},r=function(){i[0].obj=n,a(),e()};r()},s=function(t){var n=this,i=t,s=$(window),o=i.find(".plans__list_caption"),a=i.find(".plans__list-row:not(.plans__list_caption)"),e=[],r=[],h=function(){s.on({load:function(){s.width()>=1024&&f()},resize:function(){s.width()<1024?(o.css({height:""}),a.css({height:""})):f()}})},f=function(){e=[],r=[],o.each(function(){var t=$(this).innerHeight();e.push(t)});var t=Math.max.apply(Math,e);a.each(function(){var t=$(this).innerHeight();r.push(t)});var n=Math.max.apply(Math,r);o.innerHeight(t),a.innerHeight(n)},c=function(){i[0].obj=n,h()};c()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2Nyb2xsRG93biIsInRoaXMiLCJBbmNob3JzIiwiSG9zdE9mZmVyIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX2RvbSIsIl9idG5MZWFybk1vcmUiLCJfYWRkRXZlbnRzIiwib24iLCJjbGljayIsIl9maW5kTmVlZEJsb2NrIiwiYnRuIiwiY2xpY2tCdG4iLCJwYXJlbnRCbG9jayIsInBhcmVudHMiLCJuZXh0QmxvY2siLCJuZXh0IiwibmV4dEJsb2NrUG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiX2luaXQiLCJfd2luZG93Iiwid2luZG93IiwiX2l0ZW1zIiwiZmluZCIsInNjcm9sbCIsIl9jaGFuZ2VBY3RpdmVBbmNob3JzIiwiY3VyRWxlbSIsImN1ckVsZW1JbmRleCIsImluZGV4IiwiY3VyRWxlbVBvcyIsImhlaWdodCIsImlubmVySGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJlcSIsImFkZENsYXNzIiwibmVlZEJsb2NrIiwibmVlZEJsb2NrUG9zaXRpb24iLCJfZGF0ZSIsIl9zZXROZWVkZWREYXkiLCJkYXRlIiwiZGF5T2ZXZWVrIiwicmVzdWx0RGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwic2V0RGF0ZSIsImdldERhdGUiLCJnZXREYXkiLCJodG1sIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsIkNsb3Vkc0FuaW1hdGVkIiwiR3V5QW5pbWF0ZWQiLCJDb250ZW50RnVsbEhlaWdodCIsIlBsYW5zQ2hvb3NlSGVpZ2h0Iiwid2lkdGgiLCJyZXNpemUiLCJfY2hlY2tQdXRJbldpbmRvdyIsIl9jaGVja1Njcm9sbCIsImxvYWQiLCJzY3JvbGxQb2ludCIsInRvcFBvcyIsInN0YXJ0IiwiZW5kIiwieCIsImhhc0NsYXNzIiwiX2FuaW1hdGlvbkVsZW1zIiwic3RhcnRQb2ludCIsImVuZFBvaW50IiwidHJhbnNsYXRlRmluaXNoIiwiY3NzIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJoZWlnaHRXaW4iLCJoZWlnaHRTaXRlIiwiX2hhbmQiLCJfZ2xvYmFsV2lkdGgiLCJfY2hlY2tHZXRJbldpbmRvdyIsIndpbmRvd0giLCJzY3JvbGxUb3BXaW4iLCJoZWlnaHRPYmoiLCJwb3NpdGlvbk9iaiIsInNlZ21lbnQiLCJyb3RhdGVTdGFydCIsImRhdGEiLCJyb3RhdGVGaW5pc2giLCJrb2ZSb3RhdGUiLCJfaGVhZGVyIiwiX3NldEhlaWdodCIsImhlYWRlckhlaWd0aCIsIm1pbi1oZWlnaHQiLCJfY2FwdGlvbiIsIl9jb250ZW50IiwiX2NhcHRpb25IZWlnaHRzIiwiX2NvbnRlbnRIZWlnaHRzIiwicHVzaCIsIm1heEhlaWdodENhcHRpb24iLCJNYXRoIiwibWF4IiwiYXBwbHkiLCJtYXhIZWlnaHRDb250ZW50Il0sIm1hcHBpbmdzIjoiQUFBQSxjQUNBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRUMsS0FBTUQsRUFBRSxlQUFnQixXQUV0QixHQUFJRSxHQUFZRixFQUFFRyxTQUl0QkgsRUFBRUMsS0FBTUQsRUFBRSxrQkFBbUIsV0FFekIsR0FBSUksR0FBU0osRUFBRUcsU0FJbkJILEVBQUVDLEtBQU1ELEVBQUUsZ0JBQWlCLFdBRXZCLEdBQUlLLEdBQVdMLEVBQUVHLFVBTXpCLElBQUlELEdBQWEsU0FBV0ksR0FFeEIsR0FBSUMsR0FBUUosS0FDUkssRUFBT0YsRUFDUEcsRUFBT1QsRUFBRyxjQUNWVSxFQUFnQkYsRUFFaEJHLEVBQWEsV0FFVEQsRUFBY0UsSUFDVkMsTUFBTyxXQUlILE1BRkFDLEdBQWdCZCxFQUFFRyxRQUVYLE1BS25CVyxFQUFpQixTQUFVQyxHQUV2QixHQUFJQyxHQUFXRCxFQUNYRSxFQUFjRCxFQUFTRSxRQUFRLHNCQUMvQkMsRUFBWUYsRUFBWUcsT0FDeEJDLEVBQW9CRixFQUFVRyxTQUFTQyxHQUUzQ2QsR0FBS2UsU0FBV0MsVUFBV0osR0FB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OENBQ3JCdUUsS0FDQUMsS0FFQTNGLEVBQWEsV0FFVGdCLEVBQVFmLElBQ0p1RCxLQUFNLFdBRUV4QyxFQUFRb0MsU0FBVyxNQUVuQmlDLEtBS1JoQyxPQUFRLFdBRUFyQyxFQUFRb0MsUUFBVSxNQUVsQm9DLEVBQVNyQixLQUNMekMsT0FBUSxLQUVaK0QsRUFBU3RCLEtBQ0x6QyxPQUFRLE1BS1oyRCxRQVFoQkEsRUFBYSxXQUNUSyxLQUNBQyxLQUVBSCxFQUFTbEcsS0FBTSxXQUVYLEdBQUlvQyxHQUFTckMsRUFBRUcsTUFBTW1DLGFBRXJCK0QsR0FBZ0JFLEtBQU1sRSxJQUkxQixJQUFJbUUsR0FBbUJDLEtBQUtDLElBQUlDLE1BQU1GLEtBQU1KLEVBRzVDRCxHQUFTbkcsS0FBTSxXQUVYLEdBQUlvQyxHQUFTckMsRUFBRUcsTUFBTW1DLGFBRXJCZ0UsR0FBZ0JDLEtBQU1sRSxJQUkxQixJQUFJdUUsR0FBbUJILEtBQUtDLElBQUlDLE1BQU1GLEtBQU1ILEVBRTVDSCxHQUFTN0QsWUFBYWtFLEdBQ3RCSixFQUFTOUQsWUFBYXNFLElBRzFCbEYsRUFBUSxXQUNKbEIsRUFBSyxHQUFHRixJQUFNQyxFQUNkSSxJQUdSZSIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5sZWFybi1tb3JlJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNjcm9sbERvd24oICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9fYW5jaG9ycycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBBbmNob3JzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmhvc3RfX29mZmVyJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEhvc3RPZmZlciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTY3JvbGxEb3duID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfZG9tID0gJCggJ2h0bWwsIGJvZHknICksXG4gICAgICAgICAgICBfYnRuTGVhcm5Nb3JlID0gX29iajtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9idG5MZWFybk1vcmUub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZmluZE5lZWRCbG9jayggJCh0aGlzKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZmluZE5lZWRCbG9jayA9IGZ1bmN0aW9uKCBidG4gKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xpY2tCdG4gPSBidG4sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEJsb2NrID0gY2xpY2tCdG4ucGFyZW50cygnW2RhdGEtbW9yZT1cInRydWVcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJsb2NrID0gcGFyZW50QmxvY2submV4dCgpLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QmxvY2tQb3NpdGlvbiA9IG5leHRCbG9jay5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICBfZG9tLmFuaW1hdGUoIHsgc2Nyb2xsVG9wOiBuZXh0QmxvY2tQb3NpdGlvbiB9LCAzMDAgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEFuY2hvcnMgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9kb20gPSAkKCAnaHRtbCwgYm9keScgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaXRlbXMgID0gJCgnW2RhdGEtYW5jaG9yPVwidHJ1ZVwiXScpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCdhJykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZmluZE5lZWRCbG9jayggJCh0aGlzKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmVBbmNob3JzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmVBbmNob3JzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgICAgIF9pdGVtcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtSW5kZXggPSBjdXJFbGVtLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtUG9zID0gY3VyRWxlbS5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICggKCBzY3JvbGxUb3AgKyBfd2luZG93LmhlaWdodCgpLzIgKSA+PSBjdXJFbGVtUG9zICkgJiYgKCAoIGN1ckVsZW0uaW5uZXJIZWlnaHQoKSArIGN1ckVsZW1Qb3MgKSA+PSBzY3JvbGxUb3AgKyBfd2luZG93LmhlaWdodCgpLzIgKSAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnYScpLmVxKGN1ckVsZW1JbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maW5kTmVlZEJsb2NrID0gZnVuY3Rpb24oIGJ0biApIHtcblxuICAgICAgICAgICAgICAgIHZhciBjbGlja0J0biA9IGJ0bixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBjbGlja0J0bi5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICBuZWVkQmxvY2sgPSBfaXRlbXMuZXEoaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICBuZWVkQmxvY2tQb3NpdGlvbiA9IG5lZWRCbG9jay5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICBfZG9tLmFuaW1hdGUoIHsgc2Nyb2xsVG9wOiBuZWVkQmxvY2tQb3NpdGlvbiB9LCAzMDAgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hhbmdlQWN0aXZlQW5jaG9ycygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgSG9zdE9mZmVyID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfZGF0ZSAgPSBfb2JqLmZpbmQoJy5ob3N0X19vZmZlci1kYXRlJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0TmVlZGVkRGF5ID0gZnVuY3Rpb24oICBkYXRlLCBkYXlPZldlZWsgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0RGF0ZSA9IG5ldyBEYXRlKCBkYXRlLmdldFRpbWUoKSApO1xuXG4gICAgICAgICAgICAgICAgaWYoICggbmV3IERhdGUoKS5nZXRIb3VycygpID09IDE3ICkgJiYgKCBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKSA+IDAgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRlLnNldERhdGUoIChkYXRlLmdldERhdGUoKSArICggNyArIGRheU9mV2VlayAtIGRhdGUuZ2V0RGF5KCkgKSAlIDcgKSArIDcgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0ZS5zZXREYXRlKCBkYXRlLmdldERhdGUoKSArICggNyArIGRheU9mV2VlayAtIGRhdGUuZ2V0RGF5KCkgKSAlIDcgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9kYXRlLmh0bWwoICcnKyAocmVzdWx0RGF0ZS5nZXRNb250aCgpICsgMSkgKycvJysgKHJlc3VsdERhdGUuZ2V0RGF0ZSgpKSArJy8nKyAocmVzdWx0RGF0ZS5nZXRGdWxsWWVhcigpKSArJycgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldE5lZWRlZERheSggbmV3IERhdGUoKSwgNSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY2xvdWRzJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IENsb3Vkc0FuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmd1eScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBHdXlBbmltYXRlZCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19jb250ZW50X2Z1bGwnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ29udGVudEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucGxhbnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgUGxhbnNDaG9vc2VIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgQ2xvdWRzQW5pbWF0ZWQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICB2YXIgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3AgLFxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHRvcFBvcyAtIF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvcFBvcyArIF9vYmouaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoIGVuZCAtIF93aW5kb3cuc2Nyb2xsVG9wKCkgKSAvICggZW5kIC0gIHN0YXJ0ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHggPiAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeCA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoICggeCA8IDEgKSAmJiAoIHggPiAwICkgKXtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSB4O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkLWFsbCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMC41O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zKCBzdGFydCwgZW5kLCBzY3JvbGxQb2ludCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zID0gZnVuY3Rpb24gKCBzdGFydFBvaW50LCBlbmRQb2ludCwgc2Nyb2xsUG9pbnQgKSB7XG5cbiAgICAgICAgICAgICAgICBfaXRlbXMuZWFjaCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlU3RhcnQgPSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlRmluaXNoID0gMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckVsZW0uaGFzQ2xhc3MoJ2Nsb3Vkc18xJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAtMTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxQb2ludCA9PSAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjcm9sbFBvaW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA8IDAuNSAmJiBzY3JvbGxQb2ludCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPj0gMC41ICYmIHNjcm9sbFBvaW50IDwgMC44ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA+PSAwLjggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgc2Nyb2xsUG9pbnQgPSAxLjMgLSBzY3JvbGxQb2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggc2Nyb2xsUG9pbnQgPj0gMC41ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0gc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRTaXRlID0gJCgnLnNpdGUnKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoZWlnaHRTaXRlIDw9IGhlaWdodFdpbiApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgR3V5QW5pbWF0ZWQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaGFuZCA9IF9vYmouZmluZCgnLmd1eV9faGFuZCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oYW5kLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3dpbmRvdy53aWR0aCgpID49IDc2OCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgd2luZG93SCA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IF9oYW5kLm9mZnNldCgpLnRvcCAtIHdpbmRvd0gsXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvcFBvcyAtIHdpbmRvd0ggKyBfb2JqLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBfaGFuZC5vZmZzZXQoKS50b3AgLSB3aW5kb3dILzI7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHdpbmRvd0gvMi41O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoIGVuZCAtIF93aW5kb3cuc2Nyb2xsVG9wKCkgKSAvICggZW5kIC0gIHN0YXJ0ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHggPiAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeCA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoICggeCA8IDEgKSAmJiAoIHggPiAwICkgKXtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSB4O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkLWFsbCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zKCBzdGFydCwgZW5kLCBzY3JvbGxQb2ludCApO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcFdpbiA9X3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0T2JqID0gX2hhbmQuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uT2JqID0gX2hhbmQub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgaWYoICggaGVpZ2h0T2JqICsgcG9zaXRpb25PYmogPCBoZWlnaHRXaW4gKyBzY3JvbGxUb3BXaW4gKSAmJiAkKCcuc2l0ZScpLmhlaWdodCgpID4gaGVpZ2h0V2luICogMiAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRTaXRlID0gJCgnLnNpdGUnKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoZWlnaHRTaXRlIDw9IGhlaWdodFdpbiApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyA9IGZ1bmN0aW9uICggc3RhcnRQb2ludCwgZW5kUG9pbnQsIHNjcm9sbFBvaW50ICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlZ21lbnQgPSBlbmRQb2ludCAtIHN0YXJ0UG9pbnQ7XG5cbiAgICAgICAgICAgICAgICBfaGFuZC5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckVsZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGVTdGFydCA9IGN1ckVsZW0uZGF0YSgncm90YXRlLXN0YXJ0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGVGaW5pc2ggPSBjdXJFbGVtLmRhdGEoJ3JvdGF0ZS1maW5pc2gnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvZlJvdGF0ZSA9IHJvdGF0ZVN0YXJ0ICsgKCByb3RhdGVGaW5pc2ggLSByb3RhdGVTdGFydCApIC8gc2VnbWVudCAqICggX3dpbmRvdy5zY3JvbGxUb3AoKSAtIHN0YXJ0UG9pbnQgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcm9sbFBvaW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlRmluaXNoICkgKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZUZpbmlzaCApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2Nyb2xsUG9pbnQgPT0gMCApIHtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZVN0YXJ0ICkgKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZVN0YXJ0ICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAta29mUm90YXRlICkrJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAta29mUm90YXRlICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIENvbnRlbnRGdWxsSGVpZ2h0ID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJIZWlndGggPSBfaGVhZGVyLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgX29iai5oZWlnaHQoIF93aW5kb3cuaGVpZ2h0KCkgLSBoZWFkZXJIZWlndGggKTtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IF9vYmouZmluZCgnPmRpdjpmaXJzdCcpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUGxhbnNDaG9vc2VIZWlnaHQgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfY2FwdGlvbiA9IF9vYmouZmluZCgnLnBsYW5zX19saXN0X2NhcHRpb24nKSxcbiAgICAgICAgICAgIF9jb250ZW50ID0gX29iai5maW5kKCcucGxhbnNfX2xpc3Qtcm93Om5vdCgucGxhbnNfX2xpc3RfY2FwdGlvbiknKSxcbiAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cyA9IFtdLFxuICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzID0gW107XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXB0aW9uLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMgPSBbXTtcbiAgICAgICAgICAgICAgICBfY29udGVudEhlaWdodHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIF9jYXB0aW9uLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHRoaXMpLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzLnB1c2goIGhlaWdodCApO1xuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodENhcHRpb24gPSBNYXRoLm1heC5hcHBseShNYXRoLCBfY2FwdGlvbkhlaWdodHMpO1xuXG5cbiAgICAgICAgICAgICAgICBfY29udGVudC5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCh0aGlzKS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cy5wdXNoKCBoZWlnaHQgKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXhIZWlnaHRDb250ZW50ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX2NvbnRlbnRIZWlnaHRzKTtcblxuICAgICAgICAgICAgICAgIF9jYXB0aW9uLmlubmVySGVpZ2h0KCBtYXhIZWlnaHRDYXB0aW9uICk7XG4gICAgICAgICAgICAgICAgX2NvbnRlbnQuaW5uZXJIZWlnaHQoIG1heEhlaWdodENvbnRlbnQgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
