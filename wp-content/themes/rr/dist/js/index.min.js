"use strict";!function(){$(function(){$.each($(".learn-more"),function(){new t($(this))}),$.each($(".site__anchors"),function(){new n($(this))}),$.each($(".host__offer-date"),function(){new e($(this))})});var t=function(t){var n=this,e=t,o=$("html, body"),i=e,a=function(){i.on({click:function(){return c($(this)),!1}})},c=function(t){var n=t,e=n.parents('[data-more="true"]'),i=e.next(),a=i.offset().top;o.animate({scrollTop:a},300)},f=function(){e[0].obj=n,a()};f()},n=function(t){var n=this,e=t,o=$("html, body"),i=$(window),a=$('[data-anchor="true"]'),c=function(){e.find("a").on({click:function(){return r($(this)),!1}}),i.on({scroll:function(){f()}})},f=function(){var t=i.scrollTop();a.each(function(){var n=$(this),o=n.index(),a=n.offset().top;t+i.height()/2>=a&&n.innerHeight()+a>=t+i.height()/2&&(e.find("a").removeClass("active"),e.find("a").eq(o).addClass("active"))})},r=function(t){var n=t,e=n.index(),i=a.eq(e),c=i.offset().top;o.animate({scrollTop:c},300)},s=function(){e[0].obj=n,c(),f()};s()},e=function(t){var n=this,e=t,o=function(){},i=function(t,n){var o=new Date(t.getTime());(new Date).getHours()>=17&&(new Date).getMinutes()>0&&t.getDay()==n?o.setDate(t.getDate()+(7+n-t.getDay())%7+7):o.setDate(t.getDate()+(7+n-t.getDay())%7),e.html(""+(o.getMonth()+1)+"/"+o.getDate()+"/"+o.getFullYear())},a=function(){e[0].obj=n,o(),i(new Date,5)};a()}}();
"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".popup"),function(){new i($(this))}),$.each($(".site__header"),function(){new e($(this))}),$.each($("#gform_3"),function(){new o($(this))})});var t=function(t){var n=this,o=t,e=o,i=$(window),s=(i.width(),function(){i.on({resize:function(){r(),a()},load:function(){a()},scroll:function(){a()}})}),a=function(){var t,n=o.offset().top,e=n-i.height(),s=n+o.height(),a=(s-i.scrollTop())/(s-e);a>1?t=0:a<0&&(t=1),a<1&&a>0&&(t=1-a),o.hasClass("putted-all")&&(t=.5),c(e,s,t)},c=function(t,n,o){e.each(function(){var t=$(this),n=100,e=1;t.hasClass("clouds_1")&&(e=-1),0==o?t.css({"-webkit-transform":"translateX("+-n*e+"%)",transform:"translateX("+-n*e+"%)"}):1==o?t.css({"-webkit-transform":"translateX("+-n*e+"%)",transform:"translateX("+-n*e+"%)"}):(o>=.5&&(o=1-o),t.css({"-webkit-transform":"translateX("+200*o*e+"%)",transform:"translateX("+200*o*e+"%)"}))})},r=function(){var t=i.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},f=function(){o[0].obj=n,s(),r()};f()},n=function(t){var n=this,o=t,e=o.find(".guy__hand"),i=$(window),s=i.width(),a=function(){i.on({resize:function(){s!=i.width()&&(s=i.width()+1,i.width()<768&&e.css({"-webkit-transform":"none",transform:"none"})),f(),r(),c()},load:function(){i.width()>=768&&c()},scroll:function(){i.width()>=768&&c()}})},c=function(){var t,n=i.height(),s=o.offset().top,a=e.offset().top-n,c=s-n+o.height();o.hasClass("putted")&&(a=e.offset().top-n/2,c=n/2.5);var r=(c-i.scrollTop())/(c-a);r>1?t=0:r<0&&(t=1),r<1&&r>0&&(t=1-r),o.hasClass("putted-all")&&(t=1),u(a,c,t)},r=function(){var t=i.height(),n=i.scrollTop(),s=e.height(),a=e.offset().top;s+a<t+n&&$(".site").height()>2*t?o.addClass("putted"):o.removeClass("putted")},f=function(){var t=i.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},u=function(t,n,o){var s=n-t;e.each(function(){var n=$(this),e=n.data("rotate-start"),a=n.data("rotate-finish"),c=e+(a-e)/s*(i.scrollTop()-t);1==o?n.css({"-webkit-transform":"rotate( "+-a+"deg )",transform:"rotate( "+-a+"deg )"}):0==o?n.css({"-webkit-transform":"rotate( "+-e+"deg )",transform:"rotate( "+-e+"deg )"}):n.css({"-webkit-transform":"rotate( "+-c+"deg )",transform:"rotate( "+-c+"deg )"})})},d=function(){o[0].obj=n,a(),r(),f()};d()},o=function(t){var n=$(this),o=$("#gform_wrapper_3"),e=t,i=function(){o=o.clone(!0),$(document).bind("gform_confirmation_loaded",function(){setTimeout(function(){$(".gform_confirmation_message").remove(),$(".order__place").append(o),$("#gform_3")[0].reset(),console.log("ddd")},3e3)})},s=function(){e[0].obj=n,i()};n.clone=function(){i()},s()},e=function(t){var n=this,o=t,e=($(window),o.find(".site__header__btn")),i=o.find(".site__header-menu"),s=($(".site__content"),$("html")),a=function(){o.removeClass("opened"),s.css({"overflow-y":"auto"}),i.attr("style","")},c=function(){e.on({click:function(){return o.hasClass("opened")?a():r(),!1}})},r=function(){o.addClass("opened"),s.css({"overflow-y":"hidden"})},f=function(){c(),o[0].obj=n};f()},i=function(t){var n=this,o=40,e=$(".popup__open"),i=t,s=i.find(".popup__close, .popup__cancel"),a=i.find(".popup__wrap"),c=i.find(".popup__content"),r=$("html"),f=$(window),u=setTimeout(function(){},1),d=function(){f.height()-2*o-a.height()>0?a.css({top:(f.height()-2*o-a.height())/2}):a.css({top:0})},l=function(){var t,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t},h=function(){i.css({overflowY:"hidden"}),r.css({overflowY:"auto",paddingRight:0}),i.removeClass("popup_opened"),i.addClass("popup_hide"),u=setTimeout(function(){i.css({overflowY:"auto"}),i.removeClass("popup_hide")},300)},p=function(){i[0].obj=n,m()},m=function(){f.on({resize:function(){d()}}),e.on({click:function(){return _($(this).attr("data-popup")),!1}}),a.on({click:function(t){t.stopPropagation()}}),i.on({click:function(){return h(),!1}}),s.on({click:function(){return h(),!1}})},_=function(t){g(t),r.css({overflowY:"hidden",paddingRight:l()}),i.addClass("popup_opened"),d()},g=function(t){var n=c.filter(".popup__"+t);c.css({display:"none"}),n.css({display:"block"})};p()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2Nyb2xsRG93biIsInRoaXMiLCJBbmNob3JzIiwiSG9zdE9mZmVyIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX2RvbSIsIl9idG5MZWFybk1vcmUiLCJfYWRkRXZlbnRzIiwib24iLCJjbGljayIsIl9maW5kTmVlZEJsb2NrIiwiYnRuIiwiY2xpY2tCdG4iLCJwYXJlbnRCbG9jayIsInBhcmVudHMiLCJuZXh0QmxvY2siLCJuZXh0IiwibmV4dEJsb2NrUG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiX2luaXQiLCJfd2luZG93Iiwid2luZG93IiwiX2l0ZW1zIiwiZmluZCIsInNjcm9sbCIsIl9jaGFuZ2VBY3RpdmVBbmNob3JzIiwiY3VyRWxlbSIsImN1ckVsZW1JbmRleCIsImluZGV4IiwiY3VyRWxlbVBvcyIsImhlaWdodCIsImlubmVySGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJlcSIsImFkZENsYXNzIiwibmVlZEJsb2NrIiwibmVlZEJsb2NrUG9zaXRpb24iLCJfc2V0TmVlZGVkRGF5IiwiZGF0ZSIsImRheU9mV2VlayIsInJlc3VsdERhdGUiLCJEYXRlIiwiZ2V0VGltZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldERheSIsInNldERhdGUiLCJnZXREYXRlIiwiaHRtbCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJDbG91ZHNBbmltYXRlZCIsIkd1eUFuaW1hdGVkIiwiUG9wdXAiLCJNZW51IiwiRm9ybSIsIndpZHRoIiwicmVzaXplIiwiX2NoZWNrUHV0SW5XaW5kb3ciLCJfY2hlY2tTY3JvbGwiLCJsb2FkIiwic2Nyb2xsUG9pbnQiLCJ0b3BQb3MiLCJzdGFydCIsImVuZCIsIngiLCJoYXNDbGFzcyIsIl9hbmltYXRpb25FbGVtcyIsInN0YXJ0UG9pbnQiLCJlbmRQb2ludCIsInRyYW5zbGF0ZUZpbmlzaCIsImNzcyIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiaGVpZ2h0V2luIiwiaGVpZ2h0U2l0ZSIsIl9oYW5kIiwiX2dsb2JhbFdpZHRoIiwiX2NoZWNrR2V0SW5XaW5kb3ciLCJ3aW5kb3dIIiwic2Nyb2xsVG9wV2luIiwiaGVpZ2h0T2JqIiwicG9zaXRpb25PYmoiLCJzZWdtZW50Iiwicm90YXRlU3RhcnQiLCJkYXRhIiwicm90YXRlRmluaXNoIiwia29mUm90YXRlIiwiX2Zvcm1DbG9uZSIsIl9vbkV2ZW50cyIsImNsb25lIiwiZG9jdW1lbnQiLCJiaW5kIiwic2V0VGltZW91dCIsInJlbW92ZSIsImFwcGVuZCIsInJlc2V0IiwiY29uc29sZSIsImxvZyIsIl9tZW51QnRuIiwiX21lbnVJdGVtcyIsIl9odG1sIiwiX2Nsb3NlTWVudSIsIm92ZXJmbG93LXkiLCJhdHRyIiwiX29wZW5NZW51IiwiX3BvcHVwUGFkZGluZyIsIl9idG5TaG93IiwiX2J0bkNsb3NlIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3RpbWVyIiwiX2NlbnRlcldyYXAiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsIl9zaG93IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUVDLEtBQU1ELEVBQUUsZUFBZ0IsV0FFdEIsR0FBSUUsR0FBWUYsRUFBRUcsU0FJdEJILEVBQUVDLEtBQU1ELEVBQUUsa0JBQW1CLFdBRXpCLEdBQUlJLEdBQVNKLEVBQUVHLFNBSW5CSCxFQUFFQyxLQUFNRCxFQUFFLHFCQUFzQixXQUU1QixHQUFJSyxHQUFXTCxFQUFFRyxVQU16QixJQUFJRCxHQUFhLFNBQVdJLEdBRXhCLEdBQUlDLEdBQVFKLEtBQ1JLLEVBQU9GLEVBQ1BHLEVBQU9ULEVBQUcsY0FDVlUsRUFBZ0JGLEVBRWhCRyxFQUFhLFdBRVRELEVBQWNFLElBQ1ZDLE1BQU8sV0FJSCxNQUZBQyxHQUFnQmQsRUFBRUcsUUFFWCxNQUtuQlcsRUFBaUIsU0FBVUMsR0FFdkIsR0FBSUMsR0FBV0QsRUFDWEUsRUFBY0QsRUFBU0UsUUFBUSxzQkFDL0JDLEVBQVlGLEVBQVlHLE9BQ3hCQyxFQUFvQkYsRUFBVUcsU0FBU0MsR0FFM0NkLEdBQUtlLFNBQVdDLFVBQVdKLEdBQXFCLE1BSXBESyxFQUFRLFdBQ0psQixFQUFLLEdBQUdGLElBQU1DLEVBQ2RJLElBR1JlLE1BR0F0QixFQUFVLFNBQVdFLEdBRXJCLEdBQUlDLEdBQVFKLEtBQ1JLLEVBQU9GLEVBQ1BHLEVBQU9ULEVBQUcsY0FDVjJCLEVBQVUzQixFQUFFNEIsUUFDWkMsRUFBVTdCLEVBQUUsd0JBRVpXLEVBQWEsV0FFVEgsRUFBS3NCLEtBQUssS0FBS2xCLElBQ1hDLE1BQU8sV0FJSCxNQUZBQyxHQUFnQmQsRUFBRUcsUUFFWCxLQUlmd0IsRUFBUWYsSUFDSm1CLE9BQVEsV0FFSkMsUUFNWkEsRUFBdUIsV0FFbkIsR0FBSVAsR0FBWUUsRUFBUUYsV0FFeEJJLEdBQU81QixLQUFNLFdBRVQsR0FBSWdDLEdBQVVqQyxFQUFFRyxNQUNaK0IsRUFBZUQsRUFBUUUsUUFDdkJDLEVBQWFILEVBQVFYLFNBQVNDLEdBRTFCRSxHQUFZRSxFQUFRVSxTQUFTLEdBQU9ELEdBQW9CSCxFQUFRSyxjQUFnQkYsR0FBZ0JYLEVBQVlFLEVBQVFVLFNBQVMsSUFFakk3QixFQUFLc0IsS0FBSyxLQUFLUyxZQUFZLFVBQzNCL0IsRUFBS3NCLEtBQUssS0FBS1UsR0FBR04sR0FBY08sU0FBUyxjQU9yRDNCLEVBQWlCLFNBQVVDLEdBRXZCLEdBQUlDLEdBQVdELEVBQ1hvQixFQUFRbkIsRUFBU21CLFFBQ2pCTyxFQUFZYixFQUFPVyxHQUFHTCxHQUN0QlEsRUFBb0JELEVBQVVwQixTQUFTQyxHQUUzQ2QsR0FBS2UsU0FBV0MsVUFBV2tCLEdBQXFCLE1BSXBEakIsRUFBUSxXQUNKbEIsRUFBSyxHQUFHRixJQUFNQyxFQUNkSSxJQUNBcUIsSUFHUk4sTUFHQXJCLEVBQVksU0FBV0MsR0FFdkIsR0FBSUMsR0FBUUosS0FDUkssRUFBT0YsRUFFUEssRUFBYSxhQUdiaUMsRUFBZ0IsU0FBV0MsRUFBTUMsR0FFN0IsR0FBSUMsR0FBYSxHQUFJQyxNQUFNSCxFQUFLSSxZQUUxQixHQUFJRCxPQUFPRSxZQUFjLEtBQVUsR0FBSUYsT0FBT0csYUFBZSxHQUFTTixFQUFLTyxVQUFZTixFQUV6RkMsRUFBV00sUUFBVVIsRUFBS1MsV0FBYyxFQUFJUixFQUFZRCxFQUFLTyxVQUFhLEVBQU0sR0FJaEZMLEVBQVdNLFFBQVNSLEVBQUtTLFdBQWMsRUFBSVIsRUFBWUQsRUFBS08sVUFBYSxHQUk3RTVDLEVBQUsrQyxLQUFNLElBQUtSLEVBQVdTLFdBQWEsR0FBSSxJQUFNVCxFQUFXTyxVQUFZLElBQU1QLEVBQVdVLGdCQUc5Ri9CLEVBQVEsV0FDSmxCLEVBQUssR0FBR0YsSUFBTUMsRUFDZEksSUFDQWlDLEVBQWUsR0FBSUksTUFBUSxHQUduQ3RCO0FDbEtSLGNBQ0EsV0FFSTFCLEVBQUcsV0FFQ0EsRUFBRUMsS0FBTUQsRUFBRSxXQUFZLFdBRWxCLEdBQUkwRCxHQUFnQjFELEVBQUVHLFNBSTFCSCxFQUFFQyxLQUFNRCxFQUFFLFFBQVMsV0FFZixHQUFJMkQsR0FBYTNELEVBQUVHLFNBSXZCSCxFQUFFQyxLQUFNRCxFQUFFLFVBQVcsV0FFakIsR0FBSTRELEdBQU81RCxFQUFFRyxTQWdCakJILEVBQUVDLEtBQU1ELEVBQUUsaUJBQWtCLFdBRXhCLEdBQUk2RCxHQUFNN0QsRUFBRUcsU0FJaEJILEVBQUVDLEtBQU1ELEVBQUUsWUFBYSxXQUVuQixHQUFJOEQsR0FBTTlELEVBQUVHLFVBUXBCLElBQUl1RCxHQUFpQixTQUFVcEQsR0FHM0IsR0FBSUMsR0FBUUosS0FDUkssRUFBT0YsRUFDUHVCLEVBQVNyQixFQUNUbUIsRUFBVTNCLEVBQUU0QixRQUlaakIsR0FIZWdCLEVBQVFvQyxRQUdWLFdBRVRwQyxFQUFRZixJQUNKb0QsT0FBUSxXQUVKQyxJQUNBQyxLQUdKQyxLQUFNLFdBRUZELEtBR0puQyxPQUFRLFdBRUptQyxTQU1aQSxFQUFlLFdBRVgsR0FHSUUsR0FIQUMsRUFBUzdELEVBQUtjLFNBQVNDLElBQ3ZCK0MsRUFBUUQsRUFBUzFDLEVBQVFVLFNBQ3pCa0MsRUFBTUYsRUFBUzdELEVBQUs2QixTQUdwQm1DLEdBQU1ELEVBQU01QyxFQUFRRixjQUFrQjhDLEVBQU9ELEVBRTVDRSxHQUFJLEVBRUxKLEVBQWMsRUFHTkksRUFBSSxJQUVaSixFQUFjLEdBSVpJLEVBQUksR0FBU0EsRUFBSSxJQUVuQkosRUFBYyxFQUFJSSxHQUdqQmhFLEVBQUtpRSxTQUFTLGdCQUVmTCxFQUFjLElBSWxCTSxFQUFpQkosRUFBT0MsRUFBS0gsSUFHakNNLEVBQWtCLFNBQVdDLEVBQVlDLEVBQVVSLEdBRS9DdkMsRUFBTzVCLEtBQU0sV0FFVCxHQUFJZ0MsR0FBVWpDLEVBQUdHLE1BRWIwRSxFQUFrQixJQUNsQkwsRUFBSSxDQUVKdkMsR0FBUXdDLFNBQVMsY0FFakJELE1BSWdCLEdBQWZKLEVBRURuQyxFQUFRNkMsS0FFSkMsb0JBQXFCLGVBQWtCRixFQUFrQkwsRUFBSyxLQUM5RFEsVUFBYSxlQUFrQkgsRUFBa0JMLEVBQUssT0FJbkMsR0FBZkosRUFFUm5DLEVBQVE2QyxLQUVKQyxvQkFBcUIsZUFBa0JGLEVBQWtCTCxFQUFLLEtBQzlEUSxVQUFhLGVBQWtCSCxFQUFrQkwsRUFBSyxRQTJDdERKLEdBQWUsS0FFZkEsRUFBYyxFQUFJQSxHQUl0Qm5DLEVBQVE2QyxLQUVKQyxvQkFBcUIsY0FBK0IsSUFBZFgsRUFBb0JJLEVBQUssS0FDL0RRLFVBQWEsY0FBK0IsSUFBZFosRUFBb0JJLEVBQUssV0FVdkVQLEVBQW9CLFdBRWhCLEdBQUlnQixHQUFZdEQsRUFBUVUsU0FDcEI2QyxFQUFhbEYsRUFBRSxTQUFTcUMsUUFFeEI2QyxJQUFjRCxFQUVkekUsRUFBS2lDLFNBQVMsY0FJZGpDLEVBQUsrQixZQUFZLGVBS3pCYixFQUFRLFdBRUpsQixFQUFLLEdBQUdGLElBQU1DLEVBQ2RJLElBQ0FzRCxJQUlSdkMsTUFHQWlDLEVBQWMsU0FBVXJELEdBR3hCLEdBQUlDLEdBQVFKLEtBQ1JLLEVBQU9GLEVBQ1A2RSxFQUFRM0UsRUFBS3NCLEtBQUssY0FDbEJILEVBQVUzQixFQUFFNEIsUUFDWndELEVBQWV6RCxFQUFRb0MsUUFHdkJwRCxFQUFhLFdBRVRnQixFQUFRZixJQUNKb0QsT0FBUSxXQUVBb0IsR0FBZ0J6RCxFQUFRb0MsVUFFeEJxQixFQUFlekQsRUFBUW9DLFFBQVUsRUFHN0JwQyxFQUFRb0MsUUFBVSxLQUVsQm9CLEVBQU1MLEtBQ0ZDLG9CQUFxQixPQUNyQkMsVUFBYSxVQU96QmYsSUFDQW9CLElBQ0FuQixLQUdKQyxLQUFNLFdBRUV4QyxFQUFRb0MsU0FBVyxLQUVuQkcsS0FLUm5DLE9BQVEsV0FFQUosRUFBUW9DLFNBQVcsS0FFbkJHLFFBUWhCQSxFQUFlLFdBRVgsR0FJSUUsR0FKQWtCLEVBQVUzRCxFQUFRVSxTQUNsQmdDLEVBQVM3RCxFQUFLYyxTQUFTQyxJQUN2QitDLEVBQVFhLEVBQU03RCxTQUFTQyxJQUFNK0QsRUFDN0JmLEVBQU1GLEVBQVNpQixFQUFVOUUsRUFBSzZCLFFBRzdCN0IsR0FBS2lFLFNBQVMsWUFFZkgsRUFBUWEsRUFBTTdELFNBQVNDLElBQU0rRCxFQUFRLEVBQ3JDZixFQUFNZSxFQUFRLElBSWxCLElBQUlkLElBQU1ELEVBQU01QyxFQUFRRixjQUFrQjhDLEVBQU9ELEVBRTVDRSxHQUFJLEVBRUxKLEVBQWMsRUFHTkksRUFBSSxJQUVaSixFQUFjLEdBSVpJLEVBQUksR0FBU0EsRUFBSSxJQUVuQkosRUFBYyxFQUFJSSxHQUdqQmhFLEVBQUtpRSxTQUFTLGdCQUVmTCxFQUFjLEdBS2xCTSxFQUFpQkosRUFBT0MsRUFBS0gsSUFJakNpQixFQUFvQixXQUVoQixHQUFJSixHQUFZdEQsRUFBUVUsU0FDcEJrRCxFQUFjNUQsRUFBUUYsWUFDdEIrRCxFQUFZTCxFQUFNOUMsU0FDbEJvRCxFQUFjTixFQUFNN0QsU0FBU0MsR0FFM0JpRSxHQUFZQyxFQUFjUixFQUFZTSxHQUFrQnZGLEVBQUUsU0FBU3FDLFNBQXVCLEVBQVo0QyxFQUVoRnpFLEVBQUtpQyxTQUFTLFVBSWRqQyxFQUFLK0IsWUFBWSxXQUt6QjBCLEVBQW9CLFdBRWhCLEdBQUlnQixHQUFZdEQsRUFBUVUsU0FDcEI2QyxFQUFhbEYsRUFBRSxTQUFTcUMsUUFFeEI2QyxJQUFjRCxFQUVkekUsRUFBS2lDLFNBQVMsY0FJZGpDLEVBQUsrQixZQUFZLGVBS3pCbUMsRUFBa0IsU0FBV0MsRUFBWUMsRUFBVVIsR0FFL0MsR0FBSXNCLEdBQVVkLEVBQVdELENBRXpCUSxHQUFNbEYsS0FBTSxXQUVSLEdBQUlnQyxHQUFVakMsRUFBR0csTUFDYndGLEVBQWMxRCxFQUFRMkQsS0FBSyxnQkFDM0JDLEVBQWU1RCxFQUFRMkQsS0FBSyxpQkFDNUJFLEVBQVlILEdBQWdCRSxFQUFlRixHQUFnQkQsR0FBWS9ELEVBQVFGLFlBQWNrRCxFQUU3RSxJQUFmUCxFQUVEbkMsRUFBUTZDLEtBQ0pDLG9CQUFxQixZQUFlYyxFQUFnQixRQUNwRGIsVUFBYSxZQUFlYSxFQUFnQixVQUt6QixHQUFmekIsRUFHUm5DLEVBQVE2QyxLQUNKQyxvQkFBcUIsWUFBZVksRUFBZSxRQUNuRFgsVUFBYSxZQUFlVyxFQUFlLFVBUS9DMUQsRUFBUTZDLEtBQ0pDLG9CQUFxQixZQUFlZSxFQUFZLFFBQ2hEZCxVQUFhLFlBQWVjLEVBQWEsYUFPekRwRSxFQUFRLFdBRUpsQixFQUFLLEdBQUdGLElBQU1DLEVBQ2RJLElBQ0EwRSxJQUNBcEIsSUFJUnZDLE1BcUhBb0MsRUFBTyxTQUFVeEQsR0FHakIsR0FBSUMsR0FBUVAsRUFBR0csTUFDWDRGLEVBQWEvRixFQUFFLG9CQUNmUSxFQUFPRixFQUdQMEYsRUFBWSxXQUVSRCxFQUFhQSxFQUFXRSxPQUFNLEdBRTlCakcsRUFBRWtHLFVBQVVDLEtBQUssNEJBQTZCLFdBSTFDQyxXQUFZLFdBRVJwRyxFQUFHLCtCQUFnQ3FHLFNBQ25DckcsRUFBRyxpQkFBaUJzRyxPQUFPUCxHQUMzQi9GLEVBQUUsWUFBWSxHQUFHdUcsUUFDakJDLFFBQVFDLElBQUksUUFDYixRQUtYL0UsRUFBUSxXQUVKbEIsRUFBSyxHQUFHRixJQUFNQyxFQUNkeUYsSUFLUnpGLEdBQU0wRixNQUFRLFdBQ1ZELEtBR0p0RSxLQUdBbUMsRUFBTyxTQUFVdkQsR0FHakIsR0FBSUMsR0FBUUosS0FDUkssRUFBT0YsRUFFUG9HLEdBRFUxRyxFQUFHNEIsUUFDRnBCLEVBQUtzQixLQUFLLHVCQUNyQjZFLEVBQWFuRyxFQUFLc0IsS0FBSyxzQkFFdkI4RSxHQURXNUcsRUFBRSxrQkFDTEEsRUFBRSxTQUdWNkcsRUFBYSxXQUVUckcsRUFBSytCLFlBQWEsVUFFbEJxRSxFQUFNOUIsS0FDRmdDLGFBQWMsU0FHbEJILEVBQVdJLEtBQU0sUUFBUyxLQUc5QmYsRUFBWSxXQUVSVSxFQUFTOUYsSUFFTEMsTUFBTyxXQWFILE1BWElMLEdBQUtpRSxTQUFVLFVBRWZvQyxJQUtBRyxLQUlHLE1BT25CQSxFQUFZLFdBRVJ4RyxFQUFLaUMsU0FBVSxVQUVmbUUsRUFBTTlCLEtBQ0ZnQyxhQUFjLFlBSXRCcEYsRUFBUSxXQUVKc0UsSUFDQXhGLEVBQUssR0FBR0YsSUFBTUMsRUFLdEJtQixNQUdBa0MsRUFBUSxTQUFVdEQsR0FHbEIsR0FBSUMsR0FBUUosS0FDUjhHLEVBQWdCLEdBQ2hCQyxFQUFZbEgsRUFBRyxnQkFDZlEsRUFBT0YsRUFDUDZHLEVBQVkzRyxFQUFLc0IsS0FBTSxpQ0FDdkJzRixFQUFRNUcsRUFBS3NCLEtBQU0sZ0JBQ25CdUYsRUFBWTdHLEVBQUtzQixLQUFNLG1CQUN2QndGLEVBQW1CdEgsRUFBRyxRQUN0QjJCLEVBQVUzQixFQUFHNEIsUUFDYjJGLEVBQVNuQixXQUFZLGFBQWMsR0FHbkNvQixFQUFjLFdBQ0w3RixFQUFRVSxTQUE2QixFQUFoQjRFLEVBQXNCRyxFQUFNL0UsU0FBVyxFQUM3RCtFLEVBQU10QyxLQUFPdkQsS0FBU0ksRUFBUVUsU0FBNkIsRUFBaEI0RSxFQUF3QkcsRUFBTS9FLFVBQWEsSUFFdEYrRSxFQUFNdEMsS0FBT3ZELElBQUssS0FHMUJrRyxFQUFrQixXQUNkLEdBQ0lDLEdBREFDLEVBQVl6QixTQUFTMEIsY0FBZSxNQVd4QyxPQVJBRCxHQUFVRSxVQUFZLDJCQUV0QjNCLFNBQVM0QixLQUFLQyxZQUFhSixHQUUzQkQsRUFBaUJDLEVBQVVLLFlBQWNMLEVBQVVNLFlBRW5EL0IsU0FBUzRCLEtBQUtJLFlBQVlQLEdBRW5CRCxHQUVYUyxFQUFRLFdBQ0ozSCxFQUFLc0UsS0FDRHNELFVBQVcsV0FFZmQsRUFBaUJ4QyxLQUNic0QsVUFBVyxPQUNYQyxhQUFjLElBR2xCN0gsRUFBSytCLFlBQWEsZ0JBQ2xCL0IsRUFBS2lDLFNBQVUsY0FFZjhFLEVBQVNuQixXQUFZLFdBRWpCNUYsRUFBS3NFLEtBQ0RzRCxVQUFXLFNBR2Y1SCxFQUFLK0IsWUFBYSxlQUNuQixNQUdQYixFQUFRLFdBQ0psQixFQUFNLEdBQUlGLElBQU1DLEVBQ2hCeUYsS0FFSkEsRUFBWSxXQUNSckUsRUFBUWYsSUFDSm9ELE9BQVEsV0FDSndELE9BR1JOLEVBQVN0RyxJQUNMQyxNQUFPLFdBRUgsTUFEQXlILEdBQU90SSxFQUFHRyxNQUFPNEcsS0FBTSxnQkFDaEIsS0FHZkssRUFBTXhHLElBQ0ZDLE1BQU8sU0FBVTBILEdBQ2JBLEVBQUVDLHFCQUdWaEksRUFBS0ksSUFDREMsTUFBTyxXQUVILE1BREFzSCxNQUNPLEtBR2ZoQixFQUFVdkcsSUFDTkMsTUFBTyxXQUVILE1BREFzSCxNQUNPLE1BSW5CRyxFQUFRLFNBQVVULEdBQ2RZLEVBQWtCWixHQUVsQlAsRUFBaUJ4QyxLQUNic0QsVUFBVyxTQUNYQyxhQUFjWixNQUVsQmpILEVBQUtpQyxTQUFVLGdCQUNmK0UsS0FHSmlCLEVBQW1CLFNBQVVaLEdBQ3pCLEdBQUlhLEdBQWFyQixFQUFVc0IsT0FBUSxXQUFhZCxFQUVoRFIsR0FBVXZDLEtBQU84RCxRQUFTLFNBQzFCRixFQUFXNUQsS0FBTzhELFFBQVMsVUFRbkNsSCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5sZWFybi1tb3JlJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNjcm9sbERvd24oICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9fYW5jaG9ycycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBBbmNob3JzKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmhvc3RfX29mZmVyLWRhdGUnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgSG9zdE9mZmVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFNjcm9sbERvd24gPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9kb20gPSAkKCAnaHRtbCwgYm9keScgKSxcbiAgICAgICAgICAgIF9idG5MZWFybk1vcmUgPSBfb2JqO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2J0bkxlYXJuTW9yZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9maW5kTmVlZEJsb2NrKCAkKHRoaXMpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maW5kTmVlZEJsb2NrID0gZnVuY3Rpb24oIGJ0biApIHtcblxuICAgICAgICAgICAgICAgIHZhciBjbGlja0J0biA9IGJ0bixcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50QmxvY2sgPSBjbGlja0J0bi5wYXJlbnRzKCdbZGF0YS1tb3JlPVwidHJ1ZVwiXScpLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QmxvY2sgPSBwYXJlbnRCbG9jay5uZXh0KCksXG4gICAgICAgICAgICAgICAgICAgIG5leHRCbG9ja1Bvc2l0aW9uID0gbmV4dEJsb2NrLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSggeyBzY3JvbGxUb3A6IG5leHRCbG9ja1Bvc2l0aW9uIH0sIDMwMCApO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQW5jaG9ycyA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2RvbSA9ICQoICdodG1sLCBib2R5JyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9pdGVtcyAgPSAkKCdbZGF0YS1hbmNob3I9XCJ0cnVlXCJdJyk7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2EnKS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9maW5kTmVlZEJsb2NrKCAkKHRoaXMpICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZUFuY2hvcnMoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoYW5nZUFjdGl2ZUFuY2hvcnMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICAgICAgX2l0ZW1zLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW1JbmRleCA9IGN1ckVsZW0uaW5kZXgoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW1Qb3MgPSBjdXJFbGVtLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgICAgICBpZiggKCAoIHNjcm9sbFRvcCArIF93aW5kb3cuaGVpZ2h0KCkvMiApID49IGN1ckVsZW1Qb3MgKSAmJiAoICggY3VyRWxlbS5pbm5lckhlaWdodCgpICsgY3VyRWxlbVBvcyApID49IHNjcm9sbFRvcCArIF93aW5kb3cuaGVpZ2h0KCkvMiApICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCdhJykuZXEoY3VyRWxlbUluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2ZpbmROZWVkQmxvY2sgPSBmdW5jdGlvbiggYnRuICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsaWNrQnRuID0gYnRuLFxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNsaWNrQnRuLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgIG5lZWRCbG9jayA9IF9pdGVtcy5lcShpbmRleCksXG4gICAgICAgICAgICAgICAgICAgIG5lZWRCbG9ja1Bvc2l0aW9uID0gbmVlZEJsb2NrLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgIF9kb20uYW5pbWF0ZSggeyBzY3JvbGxUb3A6IG5lZWRCbG9ja1Bvc2l0aW9uIH0sIDMwMCApO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGFuZ2VBY3RpdmVBbmNob3JzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBIb3N0T2ZmZXIgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iajtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXROZWVkZWREYXkgPSBmdW5jdGlvbiggIGRhdGUsIGRheU9mV2VlayApIHtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHREYXRlID0gbmV3IERhdGUoIGRhdGUuZ2V0VGltZSgpICk7XG5cbiAgICAgICAgICAgICAgICBpZiggKCBuZXcgRGF0ZSgpLmdldEhvdXJzKCkgPj0gMTcgKSAmJiAoIG5ldyBEYXRlKCkuZ2V0TWludXRlcygpID4gMCApICYmICggZGF0ZS5nZXREYXkoKSA9PSBkYXlPZldlZWsgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRlLnNldERhdGUoIChkYXRlLmdldERhdGUoKSArICggNyArIGRheU9mV2VlayAtIGRhdGUuZ2V0RGF5KCkgKSAlIDcgKSArIDcgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0ZS5zZXREYXRlKCBkYXRlLmdldERhdGUoKSArICggNyArIGRheU9mV2VlayAtIGRhdGUuZ2V0RGF5KCkgKSAlIDcgKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9vYmouaHRtbCggJycrIChyZXN1bHREYXRlLmdldE1vbnRoKCkgKyAxKSArJy8nKyAocmVzdWx0RGF0ZS5nZXREYXRlKCkpICsnLycrIChyZXN1bHREYXRlLmdldEZ1bGxZZWFyKCkpICsnJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0TmVlZGVkRGF5KCBuZXcgRGF0ZSgpLCA1ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG4gICB2YXIgIGZvcm1DbG9uZTtcbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5jbG91ZHMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2xvdWRzQW5pbWF0ZWQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuZ3V5JyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEd1eUFuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnBvcHVwJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgIC8qJC5lYWNoKCAkKCcuc2l0ZV9fY29udGVudF9mdWxsJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IENvbnRlbnRGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApOyovXG5cbiAgICAgICAgLyokLmVhY2goICQoJy5wbGFucycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQbGFuc0Nob29zZUhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTsqL1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNpdGVfX2hlYWRlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnI2dmb3JtXzMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRm9ybSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgIFxuXG4gICAgfSApO1xuXG4gICAgdmFyIENsb3Vkc0FuaW1hdGVkID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2l0ZW1zID0gX29iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wICxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSB0b3BQb3MgLSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBlbmQgPSB0b3BQb3MgKyBfb2JqLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgIHZhciB4ID0gKCBlbmQgLSBfd2luZG93LnNjcm9sbFRvcCgpICkgLyAoIGVuZCAtICBzdGFydCApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB4ID4gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDA7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHggPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCAoIHggPCAxICkgJiYgKCB4ID4gMCApICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0geDtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZC1hbGwnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDAuNTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyggc3RhcnQsIGVuZCwgc2Nyb2xsUG9pbnQgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyA9IGZ1bmN0aW9uICggc3RhcnRQb2ludCwgZW5kUG9pbnQsIHNjcm9sbFBvaW50ICkge1xuXG4gICAgICAgICAgICAgICAgX2l0ZW1zLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVN0YXJ0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZUZpbmlzaCA9IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJFbGVtLmhhc0NsYXNzKCdjbG91ZHNfMScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2Nyb2xsUG9pbnQgPT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY3JvbGxQb2ludCA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPCAwLjUgJiYgc2Nyb2xsUG9pbnQgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50ID49IDAuNSAmJiBzY3JvbGxQb2ludCA8IDAuOCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCB0cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPj0gMC44ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIHNjcm9sbFBvaW50ID0gMS4zIC0gc2Nyb2xsUG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHNjcm9sbFBvaW50ID49IDAuNSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0U2l0ZSA9ICQoJy5zaXRlJykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiggaGVpZ2h0U2l0ZSA8PSBoZWlnaHRXaW4gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEd1eUFuaW1hdGVkID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2hhbmQgPSBfb2JqLmZpbmQoJy5ndXlfX2hhbmQnKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZ2xvYmFsV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpICsgMTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGFuZC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF93aW5kb3cud2lkdGgoKSA+PSA3NjgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBfaGFuZC5vZmZzZXQoKS50b3AgLSB3aW5kb3dILFxuICAgICAgICAgICAgICAgICAgICBlbmQgPSB0b3BQb3MgLSB3aW5kb3dIICsgX29iai5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gX2hhbmQub2Zmc2V0KCkudG9wIC0gd2luZG93SC8yO1xuICAgICAgICAgICAgICAgICAgICBlbmQgPSB3aW5kb3dILzIuNTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB4ID0gKCBlbmQgLSBfd2luZG93LnNjcm9sbFRvcCgpICkgLyAoIGVuZCAtICBzdGFydCApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB4ID4gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDA7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHggPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCAoIHggPCAxICkgJiYgKCB4ID4gMCApICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0geDtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIF9vYmouaGFzQ2xhc3MoJ3B1dHRlZC1hbGwnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyggc3RhcnQsIGVuZCwgc2Nyb2xsUG9pbnQgKTtcblxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3BXaW4gPV93aW5kb3cuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodE9iaiA9IF9oYW5kLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbk9iaiA9IF9oYW5kLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAgICAgICAgIGlmKCAoIGhlaWdodE9iaiArIHBvc2l0aW9uT2JqIDwgaGVpZ2h0V2luICsgc2Nyb2xsVG9wV2luICkgJiYgJCgnLnNpdGUnKS5oZWlnaHQoKSA+IGhlaWdodFdpbiAqIDIgICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0U2l0ZSA9ICQoJy5zaXRlJykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiggaGVpZ2h0U2l0ZSA8PSBoZWlnaHRXaW4gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMgPSBmdW5jdGlvbiAoIHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBzY3JvbGxQb2ludCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBzZWdtZW50ID0gZW5kUG9pbnQgLSBzdGFydFBvaW50O1xuXG4gICAgICAgICAgICAgICAgX2hhbmQuZWFjaCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlU3RhcnQgPSBjdXJFbGVtLmRhdGEoJ3JvdGF0ZS1zdGFydCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlRmluaXNoID0gY3VyRWxlbS5kYXRhKCdyb3RhdGUtZmluaXNoJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrb2ZSb3RhdGUgPSByb3RhdGVTdGFydCArICggcm90YXRlRmluaXNoIC0gcm90YXRlU3RhcnQgKSAvIHNlZ21lbnQgKiAoIF93aW5kb3cuc2Nyb2xsVG9wKCkgLSBzdGFydFBvaW50ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxQb2ludCA9PSAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZUZpbmlzaCApICsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVGaW5pc2ggKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjcm9sbFBvaW50ID09IDAgKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVTdGFydCApICsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVTdGFydCApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLWtvZlJvdGF0ZSApKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLWtvZlJvdGF0ZSApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIC8qdmFyIENvbnRlbnRGdWxsSGVpZ2h0ID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJIZWlndGggPSBfaGVhZGVyLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgX29iai5oZWlnaHQoIF93aW5kb3cuaGVpZ2h0KCkgLSBoZWFkZXJIZWlndGggKTtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IF9vYmouZmluZCgnPmRpdjpmaXJzdCcpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07Ki9cblxuICAgIC8qdmFyIFBsYW5zQ2hvb3NlSGVpZ2h0ID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2NhcHRpb24gPSBfb2JqLmZpbmQoJy5wbGFuc19fbGlzdF9jYXB0aW9uJyksXG4gICAgICAgICAgICBfY29udGVudCA9IF9vYmouZmluZCgnLnBsYW5zX19saXN0LXJvdzpub3QoLnBsYW5zX19saXN0X2NhcHRpb24pJyksXG4gICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMgPSBbXSxcbiAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cyA9IFtdO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2FwdGlvbi5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGVudC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzID0gW107XG4gICAgICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzID0gW107XG5cbiAgICAgICAgICAgICAgICBfY2FwdGlvbi5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCh0aGlzKS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cy5wdXNoKCBoZWlnaHQgKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXhIZWlnaHRDYXB0aW9uID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX2NhcHRpb25IZWlnaHRzKTtcblxuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnQuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfY29udGVudEhlaWdodHMucHVzaCggaGVpZ2h0ICk7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0Q29udGVudCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF9jb250ZW50SGVpZ2h0cyk7XG5cbiAgICAgICAgICAgICAgICBfY2FwdGlvbi5pbm5lckhlaWdodCggbWF4SGVpZ2h0Q2FwdGlvbiApO1xuICAgICAgICAgICAgICAgIF9jb250ZW50LmlubmVySGVpZ2h0KCBtYXhIZWlnaHRDb250ZW50ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07Ki9cblxuICAgIHZhciBGb3JtID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgIF9mb3JtQ2xvbmUgPSAkKCcjZ2Zvcm1fd3JhcHBlcl8zJyksXG4gICAgICAgICAgICBfb2JqID0gb2JqO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfZm9ybUNsb25lID0gX2Zvcm1DbG9uZS5jbG9uZSh0cnVlKTtcblxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmJpbmQoJ2dmb3JtX2NvbmZpcm1hdGlvbl9sb2FkZWQnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIC8qJCgnLnBvcHVwX19yZXF1ZXN0JykuYWRkQ2xhc3MoJ3BvcHVwX19yZXF1ZXN0X25vLWJnJyk7Ki9cblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnLmdmb3JtX2NvbmZpcm1hdGlvbl9tZXNzYWdlJyApLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCggJy5vcmRlcl9fcGxhY2UnKS5hcHBlbmQoX2Zvcm1DbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjZ2Zvcm1fMycpWzBdLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGRkJylcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCApXG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuICAgICAgICBfc2VsZi5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyksXG4gICAgICAgICAgICBfbWVudUJ0biA9IF9vYmouZmluZCgnLnNpdGVfX2hlYWRlcl9fYnRuJyksXG4gICAgICAgICAgICBfbWVudUl0ZW1zID0gX29iai5maW5kKCcuc2l0ZV9faGVhZGVyLW1lbnUnKSxcbiAgICAgICAgICAgIF9jb250ZW50ID0gJCgnLnNpdGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2xvc2VNZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX21lbnVJdGVtcy5hdHRyKCAnc3R5bGUnLCAnJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX21lbnVCdG4ub24oIHtcblxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcyggJ29wZW5lZCcgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
