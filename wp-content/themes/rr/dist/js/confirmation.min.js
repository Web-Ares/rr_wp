"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".site__content_full"),function(){new o($(this))}),$.each($(".plans"),function(){new i($(this))}),$.each($(".site__header"),function(){new e($(this))}),$(".popup").each(function(){new s($(this))}),$(document).bind("gform_confirmation_loaded",function(){$(".popup__request").addClass("popup__request_no-bg")})});var t=function(t){var n=this,o=t,i=o,e=$(window),s=(e.width(),function(){e.on({resize:function(){r(),a()},load:function(){a()},scroll:function(){a()}})}),a=function(){var t,n=o.offset().top,i=n-e.height(),s=n+o.height(),a=(s-e.scrollTop())/(s-i);a>1?t=0:a<0&&(t=1),a<1&&a>0&&(t=1-a),o.hasClass("putted-all")&&(t=.5),c(i,s,t)},c=function(t,n,o){i.each(function(){var t=$(this),n=100,i=1;t.hasClass("clouds_1")&&(i=-1),0==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):1==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):(o>=.5&&(o=1-o),t.css({"-webkit-transform":"translateX("+200*o*i+"%)",transform:"translateX("+200*o*i+"%)"}))})},r=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},h=function(){o[0].obj=n,s(),r()};h()},n=function(t){var n=this,o=t,i=o.find(".guy__hand"),e=$(window),s=e.width(),a=function(){e.on({resize:function(){s!=e.width()&&(s=e.width()+1,e.width()<768&&i.css({"-webkit-transform":"none",transform:"none"})),h(),r(),c()},load:function(){e.width()>=768&&c()},scroll:function(){e.width()>=768&&c()}})},c=function(){var t,n=e.height(),s=o.offset().top,a=i.offset().top-n,c=s-n+o.height();o.hasClass("putted")&&(a=i.offset().top-n/2,c=n/2.5);var r=(c-e.scrollTop())/(c-a);r>1?t=0:r<0&&(t=1),r<1&&r>0&&(t=1-r),o.hasClass("putted-all")&&(t=1),u(a,c,t)},r=function(){var t=e.height(),n=e.scrollTop(),s=i.height(),a=i.offset().top;s+a<t+n&&$(".site").height()>2*t?o.addClass("putted"):o.removeClass("putted")},h=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},u=function(t,n,o){var s=n-t;i.each(function(){var n=$(this),i=n.data("rotate-start"),a=n.data("rotate-finish"),c=i+(a-i)/s*(e.scrollTop()-t);1==o?n.css({"-webkit-transform":"rotate( "+-a+"deg )",transform:"rotate( "+-a+"deg )"}):0==o?n.css({"-webkit-transform":"rotate( "+-i+"deg )",transform:"rotate( "+-i+"deg )"}):n.css({"-webkit-transform":"rotate( "+-c+"deg )",transform:"rotate( "+-c+"deg )"})})},f=function(){o[0].obj=n,a(),r(),h()};f()},o=function(t){var n=this,o=t,i=$(window),e=$(".site__header"),s=function(){i.on({resize:function(){a()}})},a=function(){var t=e.height();o.height(i.height()-t),o.css({"min-height":o.find(">div:first").height()})},c=function(){o[0].obj=n,s(),a()};c()},i=function(t){var n=this,o=t,i=$(window),e=o.find(".plans__list_caption"),s=o.find(".plans__list-row:not(.plans__list_caption)"),a=[],c=[],r=function(){i.on({load:function(){i.width()>=1024&&h()},resize:function(){i.width()<1024?(e.css({height:""}),s.css({height:""})):h()}})},h=function(){a=[],c=[],e.each(function(){var t=$(this).innerHeight();a.push(t)});var t=Math.max.apply(Math,a);s.each(function(){var t=$(this).innerHeight();c.push(t)});var n=Math.max.apply(Math,c);e.innerHeight(t),s.innerHeight(n)},u=function(){o[0].obj=n,r()};u()},e=function(t){var n=this,o=t,i=($(window),o.find(".site__header__btn")),e=o.find(".site__header-menu"),s=($(".site__content"),$("html")),a=function(){o.removeClass("opened"),s.css({"overflow-y":"auto"}),e.attr("style","")},c=function(){i.on({click:function(){return o.hasClass("opened")?a():r(),!1}})},r=function(){o.addClass("opened"),s.css({"overflow-y":"hidden"})},h=function(){c(),o[0].obj=n};h()},s=function(t){var n=this,o=40,i=$(".popup__open"),e=t,s=e.find(".popup__close, .popup__cancel"),a=e.find(".popup__wrap"),c=e.find(".popup__content"),r=$("html"),h=$(window),u=setTimeout(function(){},1),f=function(){h.height()-2*o-a.height()>0?a.css({top:(h.height()-2*o-a.height())/2}):a.css({top:0})},d=function(){var t,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t},l=function(){e.css({overflowY:"hidden"}),r.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),u=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},p=function(){e[0].obj=n,_()},_=function(){h.on({resize:function(){f()}}),i.on({click:function(){return w($(this).attr("data-popup")),!1}}),a.on({click:function(t){t.stopPropagation()}}),e.on({click:function(){return l(),!1}}),s.on({click:function(){return l(),!1}})},w=function(t){g(t),r.css({overflowY:"hidden",paddingRight:d()}),e.addClass("popup_opened"),f()},g=function(t){var n=c.filter(".popup__"+t);c.css({display:"none"}),n.css({display:"block"})};p()}}();
"use strict";!function(){$(function(){$.each($(".confirmation"),function(){new n($(this))})});var n=function(n){var e,a,o=this,i=n,s=i.find(".confirmation__data-paste"),t=function(){var n="",o="",i=[];for(var t in e)var r=e[t];void 0!=e.ratePlan&&$.each(e.ratePlan,function(){var a=e.ratePlan.value.split(" ");if("session pricing"===e.ratePlan.sessionType)n="<span>"+e.ratePlan.sessionType+" ("+a[0]+" sessions)</span>";else if("minute pricing"===e.ratePlan.sessionType){var o=a[0].replace(/[^0-9]+/g,"");o>1e5&&(o=o/1e6+"M"),n="<span>"+e.ratePlan.sessionType+" ("+o+" minutes ("+a[2]+"/minute)</span>"}});for(var c in a)i.push(c);i.length>0&&(o=1==i.length?"+ "+i.length+" service":"+ "+i.length+" service"),s.html("You chose "+n+", "+r+" "+o+").")},r=function(){void 0!=localStorage.radioChoose?(e=JSON.parse(localStorage.radioChoose),a=JSON.parse(localStorage.checkboxChoose),t()):window.location.href=$("body").data("src")},c=function(){i[0].obj=o,r()};c()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmNvbmZpcm1hdGlvbi5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIkNsb3Vkc0FuaW1hdGVkIiwidGhpcyIsIkd1eUFuaW1hdGVkIiwiQ29udGVudEZ1bGxIZWlnaHQiLCJQbGFuc0Nob29zZUhlaWdodCIsIk1lbnUiLCJQb3B1cCIsImRvY3VtZW50IiwiYmluZCIsImFkZENsYXNzIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX2l0ZW1zIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9hZGRFdmVudHMiLCJ3aWR0aCIsIm9uIiwicmVzaXplIiwiX2NoZWNrUHV0SW5XaW5kb3ciLCJfY2hlY2tTY3JvbGwiLCJsb2FkIiwic2Nyb2xsIiwic2Nyb2xsUG9pbnQiLCJ0b3BQb3MiLCJvZmZzZXQiLCJ0b3AiLCJzdGFydCIsImhlaWdodCIsImVuZCIsIngiLCJzY3JvbGxUb3AiLCJoYXNDbGFzcyIsIl9hbmltYXRpb25FbGVtcyIsInN0YXJ0UG9pbnQiLCJlbmRQb2ludCIsImN1ckVsZW0iLCJ0cmFuc2xhdGVGaW5pc2giLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsImhlaWdodFdpbiIsImhlaWdodFNpdGUiLCJyZW1vdmVDbGFzcyIsIl9pbml0IiwiX2hhbmQiLCJmaW5kIiwiX2dsb2JhbFdpZHRoIiwiX2NoZWNrR2V0SW5XaW5kb3ciLCJ3aW5kb3dIIiwic2Nyb2xsVG9wV2luIiwiaGVpZ2h0T2JqIiwicG9zaXRpb25PYmoiLCJzZWdtZW50Iiwicm90YXRlU3RhcnQiLCJkYXRhIiwicm90YXRlRmluaXNoIiwia29mUm90YXRlIiwiX2hlYWRlciIsIl9zZXRIZWlnaHQiLCJoZWFkZXJIZWlndGgiLCJtaW4taGVpZ2h0IiwiX2NhcHRpb24iLCJfY29udGVudCIsIl9jYXB0aW9uSGVpZ2h0cyIsIl9jb250ZW50SGVpZ2h0cyIsImlubmVySGVpZ2h0IiwicHVzaCIsIm1heEhlaWdodENhcHRpb24iLCJNYXRoIiwibWF4IiwiYXBwbHkiLCJtYXhIZWlnaHRDb250ZW50IiwiX21lbnVCdG4iLCJfbWVudUl0ZW1zIiwiX2h0bWwiLCJfY2xvc2VNZW51Iiwib3ZlcmZsb3cteSIsImF0dHIiLCJfb25FdmVudHMiLCJjbGljayIsIl9vcGVuTWVudSIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9idG5DbG9zZSIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl90aW1lciIsInNldFRpbWVvdXQiLCJfY2VudGVyV3JhcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX3Nob3ciLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNwbGF5IiwiUGFzdGVEYXRhIiwiX2RhdGFSYWRpbyIsIl9kYXRhQ2hlY2tib3giLCJfY2hvc2VuRGF0YSIsIl93cml0ZUluQmxvY2siLCJkaXZSYXRlIiwibnVtIiwiYXJyIiwia2V5IiwiaXRlbSIsInVuZGVmaW5lZCIsInJhdGVQbGFuIiwidmFsdWUiLCJzcGxpdCIsInNlc3Npb25UeXBlIiwibWludXRlcyIsInJlcGxhY2UiLCJrZXkxIiwibGVuZ3RoIiwiaHRtbCIsIl9nZXRTZXNzaW9uRGF0YSIsImxvY2FsU3RvcmFnZSIsInJhZGlvQ2hvb3NlIiwiSlNPTiIsInBhcnNlIiwiY2hlY2tib3hDaG9vc2UiLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFFLFdBQVksV0FFbEIsR0FBSUUsR0FBZ0JGLEVBQUVHLFNBSTFCSCxFQUFFQyxL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LGFBQWFDLGFBRWJyQixFQUFhc0IsS0FBS0MsTUFBT0gsYUFBYUMsYUFDdENwQixFQUFnQnFCLEtBQUtDLE1BQU9ILGFBQWFJLGdCQUV6Q3JCLEtBSUFyRyxPQUFPMkgsU0FBU0MsS0FBTzdJLEVBQUUsUUFBUTBELEtBQUssUUFLOUNYLEVBQVEsV0FFSmpDLEVBQUssR0FBR0YsSUFBTUMsRUFDZHlILElBR1J2RiIsImZpbGUiOiJjb25maXJtYXRpb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY2xvdWRzJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IENsb3Vkc0FuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmd1eScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBHdXlBbmltYXRlZCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19jb250ZW50X2Z1bGwnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ29udGVudEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucGxhbnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgUGxhbnNDaG9vc2VIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9faGVhZGVyJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLnBvcHVwJykuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIG5ldyBQb3B1cCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuXG4gICAgICAgICQoZG9jdW1lbnQpLmJpbmQoJ2dmb3JtX2NvbmZpcm1hdGlvbl9sb2FkZWQnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAkKCcucG9wdXBfX3JlcXVlc3QnKS5hZGRDbGFzcygncG9wdXBfX3JlcXVlc3Rfbm8tYmcnKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgQ2xvdWRzQW5pbWF0ZWQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICB2YXIgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3AgLFxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHRvcFBvcyAtIF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvcFBvcyArIF9vYmouaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoIGVuZCAtIF93aW5kb3cuc2Nyb2xsVG9wKCkgKSAvICggZW5kIC0gIHN0YXJ0ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHggPiAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeCA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoICggeCA8IDEgKSAmJiAoIHggPiAwICkgKXtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSB4O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkLWFsbCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMC41O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zKCBzdGFydCwgZW5kLCBzY3JvbGxQb2ludCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zID0gZnVuY3Rpb24gKCBzdGFydFBvaW50LCBlbmRQb2ludCwgc2Nyb2xsUG9pbnQgKSB7XG5cbiAgICAgICAgICAgICAgICBfaXRlbXMuZWFjaCggZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlU3RhcnQgPSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlRmluaXNoID0gMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckVsZW0uaGFzQ2xhc3MoJ2Nsb3Vkc18xJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSAtMTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxQb2ludCA9PSAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjcm9sbFBvaW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA8IDAuNSAmJiBzY3JvbGxQb2ludCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggc2Nyb2xsUG9pbnQgPj0gMC41ICYmIHNjcm9sbFBvaW50IDwgMC44ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA+PSAwLjggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgc2Nyb2xsUG9pbnQgPSAxLjMgLSBzY3JvbGxQb2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggc2Nyb2xsUG9pbnQgPj0gMC41ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxIC0gc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRTaXRlID0gJCgnLnNpdGUnKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoZWlnaHRTaXRlIDw9IGhlaWdodFdpbiApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgR3V5QW5pbWF0ZWQgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaGFuZCA9IF9vYmouZmluZCgnLmd1eV9faGFuZCcpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9nbG9iYWxXaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2lkdGggPSBfd2luZG93LndpZHRoKCkgKyAxO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oYW5kLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3dpbmRvdy53aWR0aCgpID49IDc2OCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgd2luZG93SCA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IF9vYmoub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IF9oYW5kLm9mZnNldCgpLnRvcCAtIHdpbmRvd0gsXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvcFBvcyAtIHdpbmRvd0ggKyBfb2JqLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBfaGFuZC5vZmZzZXQoKS50b3AgLSB3aW5kb3dILzI7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHdpbmRvd0gvMi41O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoIGVuZCAtIF93aW5kb3cuc2Nyb2xsVG9wKCkgKSAvICggZW5kIC0gIHN0YXJ0ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHggPiAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMDtcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggeCA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoICggeCA8IDEgKSAmJiAoIHggPiAwICkgKXtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSB4O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCAgX29iai5oYXNDbGFzcygncHV0dGVkLWFsbCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMTtcblxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zKCBzdGFydCwgZW5kLCBzY3JvbGxQb2ludCApO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcFdpbiA9X3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0T2JqID0gX2hhbmQuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uT2JqID0gX2hhbmQub2Zmc2V0KCkudG9wO1xuXG4gICAgICAgICAgICAgICAgaWYoICggaGVpZ2h0T2JqICsgcG9zaXRpb25PYmogPCBoZWlnaHRXaW4gKyBzY3JvbGxUb3BXaW4gKSAmJiAkKCcuc2l0ZScpLmhlaWdodCgpID4gaGVpZ2h0V2luICogMiAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3cgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRXaW4gPSBfd2luZG93LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRTaXRlID0gJCgnLnNpdGUnKS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIGlmKCBoZWlnaHRTaXRlIDw9IGhlaWdodFdpbiApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQtYWxsJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbmltYXRpb25FbGVtcyA9IGZ1bmN0aW9uICggc3RhcnRQb2ludCwgZW5kUG9pbnQsIHNjcm9sbFBvaW50ICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlZ21lbnQgPSBlbmRQb2ludCAtIHN0YXJ0UG9pbnQ7XG5cbiAgICAgICAgICAgICAgICBfaGFuZC5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckVsZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGVTdGFydCA9IGN1ckVsZW0uZGF0YSgncm90YXRlLXN0YXJ0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGVGaW5pc2ggPSBjdXJFbGVtLmRhdGEoJ3JvdGF0ZS1maW5pc2gnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvZlJvdGF0ZSA9IHJvdGF0ZVN0YXJ0ICsgKCByb3RhdGVGaW5pc2ggLSByb3RhdGVTdGFydCApIC8gc2VnbWVudCAqICggX3dpbmRvdy5zY3JvbGxUb3AoKSAtIHN0YXJ0UG9pbnQgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcm9sbFBvaW50ID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlRmluaXNoICkgKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZUZpbmlzaCApICsnZGVnICknXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2Nyb2xsUG9pbnQgPT0gMCApIHtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZVN0YXJ0ICkgKydkZWcgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdyb3RhdGUoICcrICggLXJvdGF0ZVN0YXJ0ICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAta29mUm90YXRlICkrJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAta29mUm90YXRlICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tHZXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgIF9jaGVja1B1dEluV2luZG93KCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIENvbnRlbnRGdWxsSGVpZ2h0ID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJIZWlndGggPSBfaGVhZGVyLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgX29iai5oZWlnaHQoIF93aW5kb3cuaGVpZ2h0KCkgLSBoZWFkZXJIZWlndGggKTtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IF9vYmouZmluZCgnPmRpdjpmaXJzdCcpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUGxhbnNDaG9vc2VIZWlnaHQgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfY2FwdGlvbiA9IF9vYmouZmluZCgnLnBsYW5zX19saXN0X2NhcHRpb24nKSxcbiAgICAgICAgICAgIF9jb250ZW50ID0gX29iai5maW5kKCcucGxhbnNfX2xpc3Qtcm93Om5vdCgucGxhbnNfX2xpc3RfY2FwdGlvbiknKSxcbiAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cyA9IFtdLFxuICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzID0gW107XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYXB0aW9uLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMgPSBbXTtcbiAgICAgICAgICAgICAgICBfY29udGVudEhlaWdodHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIF9jYXB0aW9uLmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHRoaXMpLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzLnB1c2goIGhlaWdodCApO1xuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodENhcHRpb24gPSBNYXRoLm1heC5hcHBseShNYXRoLCBfY2FwdGlvbkhlaWdodHMpO1xuXG5cbiAgICAgICAgICAgICAgICBfY29udGVudC5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCh0aGlzKS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cy5wdXNoKCBoZWlnaHQgKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXhIZWlnaHRDb250ZW50ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX2NvbnRlbnRIZWlnaHRzKTtcblxuICAgICAgICAgICAgICAgIF9jYXB0aW9uLmlubmVySGVpZ2h0KCBtYXhIZWlnaHRDYXB0aW9uICk7XG4gICAgICAgICAgICAgICAgX2NvbnRlbnQuaW5uZXJIZWlnaHQoIG1heEhlaWdodENvbnRlbnQgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyksXG4gICAgICAgICAgICBfbWVudUJ0biA9IF9vYmouZmluZCgnLnNpdGVfX2hlYWRlcl9fYnRuJyksXG4gICAgICAgICAgICBfbWVudUl0ZW1zID0gX29iai5maW5kKCcuc2l0ZV9faGVhZGVyLW1lbnUnKSxcbiAgICAgICAgICAgIF9jb250ZW50ID0gJCgnLnNpdGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIF9odG1sID0gJCgnaHRtbCcpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2xvc2VNZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX21lbnVJdGVtcy5hdHRyKCAnc3R5bGUnLCAnJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX21lbnVCdG4ub24oIHtcblxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcyggJ29wZW5lZCcgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpIHtcblxuICAgICQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNvbmZpcm1hdGlvbicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQYXN0ZURhdGEoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgUGFzdGVEYXRhID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2Nob3NlbkRhdGEgPSBfb2JqLmZpbmQoJy5jb25maXJtYXRpb25fX2RhdGEtcGFzdGUnKSxcbiAgICAgICAgICAgIF9kYXRhUmFkaW8sXG4gICAgICAgICAgICBfZGF0YUNoZWNrYm94LFxuICAgICAgICAgICAgX3N0ciA9ICcnO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfd3JpdGVJbkJsb2NrID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGl2UmF0ZSA9ICcnLFxuICAgICAgICAgICAgICAgICAgICBudW0gPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkgaW4gX2RhdGFSYWRpbyAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfZGF0YVJhZGlvWyBrZXkgXTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBfZGF0YVJhZGlvLnJhdGVQbGFuICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIF9kYXRhUmFkaW8ucmF0ZVBsYW4sIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfZGF0YVJhZGlvLnJhdGVQbGFuLnZhbHVlLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfZGF0YVJhZGlvLnJhdGVQbGFuLnNlc3Npb25UeXBlID09PSAnc2Vzc2lvbiBwcmljaW5nJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdlJhdGUgPSAnPHNwYW4+JysgX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSArJyAoJysgdmFsdWVbMF0gKycgc2Vzc2lvbnMpPC9zcGFuPic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSA9PT0gJ21pbnV0ZSBwcmljaW5nJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gdmFsdWVbMF0ucmVwbGFjZSgvW14wLTldKy9nLCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBtaW51dGVzID4gMTAwMDAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBtaW51dGVzLzEwMDAwMDAgKyAnTSdcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdlJhdGUgPSAnPHNwYW4+JysgX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSArJyAoJysgbWludXRlcyArJyBtaW51dGVzICgnICsgdmFsdWVbMl0gKyAnL21pbnV0ZSk8L3NwYW4+JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5MSBpbiBfZGF0YUNoZWNrYm94ICApIHtcblxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChrZXkxKVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGFyci5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBhcnIubGVuZ3RoID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9ICcrICcgKyBhcnIubGVuZ3RoICsgJyBzZXJ2aWNlJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAnKyAnICsgYXJyLmxlbmd0aCArICcgc2VydmljZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2Nob3NlbkRhdGEuaHRtbCgnWW91IGNob3NlICcgKyBkaXZSYXRlICsgJywgJyArIGl0ZW0gKyAnICcgKyBudW0gKyAnKS4nKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTZXNzaW9uRGF0YSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2RhdGFSYWRpbyA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSApO1xuICAgICAgICAgICAgICAgICAgICBfZGF0YUNoZWNrYm94ID0gSlNPTi5wYXJzZSggbG9jYWxTdG9yYWdlLmNoZWNrYm94Q2hvb3NlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3dyaXRlSW5CbG9jaygpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQoJ2JvZHknKS5kYXRhKCdzcmMnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfZ2V0U2Vzc2lvbkRhdGEoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
