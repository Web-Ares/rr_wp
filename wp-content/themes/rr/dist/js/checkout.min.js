"use strict";!function(){$(function(){$.each($(".clouds"),function(){new t($(this))}),$.each($(".guy"),function(){new n($(this))}),$.each($(".site__content_full"),function(){new o($(this))}),$.each($(".plans"),function(){new i($(this))}),$.each($(".site__header"),function(){new e($(this))}),$(".popup").each(function(){new s($(this))})});var t=function(t){var n=this,o=t,i=o,e=$(window),s=(e.width(),function(){e.on({resize:function(){r(),a()},load:function(){a()},scroll:function(){a()}})}),a=function(){var t,n=o.offset().top,i=n-e.height(),s=n+o.height(),a=(s-e.scrollTop())/(s-i);a>1?t=0:a<0&&(t=1),a<1&&a>0&&(t=1-a),o.hasClass("putted-all")&&(t=.5),c(i,s,t)},c=function(t,n,o){i.each(function(){var t=$(this),n=100,i=1;t.hasClass("clouds_1")&&(i=-1),0==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):1==o?t.css({"-webkit-transform":"translateX("+-n*i+"%)",transform:"translateX("+-n*i+"%)"}):(o>=.5&&(o=1-o),t.css({"-webkit-transform":"translateX("+200*o*i+"%)",transform:"translateX("+200*o*i+"%)"}))})},r=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},h=function(){o[0].obj=n,s(),r()};h()},n=function(t){var n=this,o=t,i=o.find(".guy__hand"),e=$(window),s=e.width(),a=function(){e.on({resize:function(){s!=e.width()&&(s=e.width()+1,e.width()<768&&i.css({"-webkit-transform":"none",transform:"none"})),h(),r(),c()},load:function(){e.width()>=768&&c()},scroll:function(){e.width()>=768&&c()}})},c=function(){var t,n=e.height(),s=o.offset().top,a=i.offset().top-n,c=s-n+o.height();o.hasClass("putted")&&(a=i.offset().top-n/2,c=n/2.5);var r=(c-e.scrollTop())/(c-a);r>1?t=0:r<0&&(t=1),r<1&&r>0&&(t=1-r),o.hasClass("putted-all")&&(t=1),f(a,c,t)},r=function(){var t=e.height(),n=e.scrollTop(),s=i.height(),a=i.offset().top;s+a<t+n&&$(".site").height()>2*t?o.addClass("putted"):o.removeClass("putted")},h=function(){var t=e.height(),n=$(".site").height();n<=t?o.addClass("putted-all"):o.removeClass("putted-all")},f=function(t,n,o){var s=n-t;i.each(function(){var n=$(this),i=n.data("rotate-start"),a=n.data("rotate-finish"),c=i+(a-i)/s*(e.scrollTop()-t);1==o?n.css({"-webkit-transform":"rotate( "+-a+"deg )",transform:"rotate( "+-a+"deg )"}):0==o?n.css({"-webkit-transform":"rotate( "+-i+"deg )",transform:"rotate( "+-i+"deg )"}):n.css({"-webkit-transform":"rotate( "+-c+"deg )",transform:"rotate( "+-c+"deg )"})})},u=function(){o[0].obj=n,a(),r(),h()};u()},o=function(t){var n=this,o=t,i=$(window),e=$(".site__header"),s=function(){i.on({resize:function(){a()}})},a=function(){var t=e.height();o.height(i.height()-t),o.css({"min-height":o.find(">div:first").height()})},c=function(){o[0].obj=n,s(),a()};c()},i=function(t){var n=this,o=t,i=$(window),e=o.find(".plans__list_caption"),s=o.find(".plans__list-row:not(.plans__list_caption)"),a=[],c=[],r=function(){i.on({load:function(){i.width()>=1024&&h()},resize:function(){i.width()<1024?(e.css({height:""}),s.css({height:""})):h()}})},h=function(){a=[],c=[],e.each(function(){var t=$(this).innerHeight();a.push(t)});var t=Math.max.apply(Math,a);s.each(function(){var t=$(this).innerHeight();c.push(t)});var n=Math.max.apply(Math,c);e.innerHeight(t),s.innerHeight(n)},f=function(){o[0].obj=n,r()};f()},e=function(t){var n=this,o=t,i=$(window),e=o.find(".site__header__btn"),s=o.find(".site__header-menu"),a=$("html"),c=function(){o.removeClass("opened"),a.css({"overflow-y":"auto"}),s.attr("style","")},r=function(){i.on({scroll:function(){i.scrollTop()>0?o.addClass("fixed"):o.removeClass("fixed")},resize:function(){}}),e.on({click:function(){return o.hasClass("opened")?c():h(),!1}})},h=function(){o.addClass("opened"),a.css({"overflow-y":"hidden"})},f=function(){r(),o[0].obj=n,i.scrollTop()>o.innerHeight()/2?o.addClass("fixed"):o.removeClass("fixed")};f()},s=function(t){var n=this,o=40,i=$(".popup__open"),e=t,s=e.find(".popup__close, .popup__cancel"),a=e.find(".popup__wrap"),c=e.find(".popup__content"),r=$("html"),h=$(window),f=setTimeout(function(){},1),u=function(){h.height()-2*o-a.height()>0?a.css({top:(h.height()-2*o-a.height())/2}):a.css({top:0})},d=function(){var t,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t},l=function(){e.css({overflowY:"hidden"}),r.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),f=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},p=function(){e[0].obj=n,w()},w=function(){h.on({resize:function(){u()}}),i.on({click:function(){return _($(this).attr("data-popup")),!1}}),a.on({click:function(t){t.stopPropagation()}}),e.on({click:function(){return l(),!1}}),s.on({click:function(){return l(),!1}})},_=function(t){g(t),r.css({overflowY:"hidden",paddingRight:d()}),e.addClass("popup_opened"),u()},g=function(t){var n=c.filter(".popup__"+t);c.css({display:"none"}),n.css({display:"block"})};p()}}();
"use strict";!function(){$(function(){$.each($(".choose-data"),function(){new t($(this))}),$.each($(".order"),function(){new e($(this))}),$.each($(".plans"),function(){new a($(this))})});var t=function(t){var e=this,a=t,n=a.find(".choose-data__items"),r=n.find("input"),i=a.find(".btn_next"),o={},s={},c={},l={},d={},f=function(){r.on({click:function(){"text"!==$(this).attr("type")&&(u($(this)),y(),localStorage.setItem("idItems",JSON.stringify(l)))},keyup:function(){"text"===$(this).attr("type")&&(u($(this)),y(),localStorage.setItem("idItems",JSON.stringify(l)),localStorage.setItem("valueInput",JSON.stringify(d)))},keydown:function(t){if($(this).hasClass("site__input_num")){if($.inArray(t.keyCode,[46,8,9,27,13,110,190])!==-1||65==t.keyCode&&t.ctrlKey===!0||67==t.keyCode&&t.ctrlKey===!0||88==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39)return;(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}}}),i.on({click:function(){var t=$(this),e=t.data("src");return p(),window.location.href=e,!1}})},u=function(t){var e=t;"radio"===e.attr("type")?(e.parents(".plans").length?o.ratePlan={sessionType:e.data("rate"),value:e.attr("value")}:o[e.attr("name")]=e.attr("value"),l[e.attr("name")]=e.attr("id")):"checkbox"===e.attr("type")?e.is(":checked")?(s[e.attr("name")]=e.attr("value"),l[e.attr("name")]=e.attr("id")):(delete s[e.attr("name")],delete l[e.attr("name")]):"text"===e.attr("type")&&(""!=e.val()?(c[e.attr("name")]=e.val(),l[e.attr("name")]=e.attr("id"),d[e.attr("id")]=e.val()):(delete c[e.attr("name")],delete l[e.attr("name")],delete d[e.attr("id")]))},v=function(){if(void 0!=localStorage.idItems){r.each(function(){var t=$(this);"checkbox"===t.attr("type")?t.prop("checked",!1):"text"===t.attr("type")&&t.val("")});var t=JSON.parse(localStorage.idItems),e=JSON.parse(localStorage.valueInput);for(var a in t){var n=t[a];r.each(function(){var t=$(this);if(t.filter("#"+n).prop("checked",!0),console.log(n),"text"===t.attr("type"))for(var a in e){var r=e[a];t.filter("#"+n).val(r)}})}}},p=function(){r.each(function(){var t=$(this);t.is(":checked")&&("radio"===t.attr("type")?l[t.attr("name")]=t.attr("id"):"checkbox"===t.attr("type")&&(t.is(":checked")?l[t.attr("name")]=t.attr("id"):delete l[t.attr("name")])),"text"===t.attr("type")&&(""!=t.val()?(l[t.attr("name")]=t.attr("id"),d[t.attr("id")]=t.val()):(delete l[t.attr("name")],delete d[t.attr("id")]),localStorage.setItem("valueInput",JSON.stringify(d)))}),localStorage.setItem("idItems",JSON.stringify(l))},h=function(){r.each(function(){var t=$(this);t.is(":checked")&&("radio"===t.attr("type")?t.parents(".plans").length?o.ratePlan={sessionType:t.data("rate"),value:t.attr("value")}:o[t.attr("name")]=t.attr("value"):"checkbox"===t.attr("type")&&(t.is(":checked")?s[t.attr("name")]=t.attr("value"):delete s[t.attr("name")])),"text"===t.attr("type")&&(""!=t.val()?c[t.attr("name")]=t.val():delete c[t.attr("name")])}),y(),p()},y=function(){localStorage.setItem("radioChoose",JSON.stringify(o)),localStorage.setItem("checkboxChoose",JSON.stringify(s)),localStorage.setItem("inputValue",JSON.stringify(c))},m=function(){a[0].obj=e,f(),v(),h()};m()},e=function(t){var e,a,n,r=this,i=t,o=i.find(".order__chosen-data span"),s=i.find("input#input_1_5"),c="",l=function(){},d=function(){var t="",r="",i=[];for(var s in e)var c=e[s]+", ";void 0!=e.ratePlan&&$.each(e.ratePlan,function(){var a=e.ratePlan.value.split(" ");if("session pricing"===e.ratePlan.sessionType)t="<span>"+e.ratePlan.sessionType+" ("+a[0]+" sessions)</span>, ";else if("minute pricing"===e.ratePlan.sessionType){var n=a[0].replace(/[^0-9]+/g,"");n>1e5&&(n=n/1e6+"M"),t="<span>"+e.ratePlan.sessionType+" ("+n+" minutes ("+a[2]+"/minute)</span>, "}}),""==t&&(t="");for(var l in a)i.push(l);i.length>0&&(r=1==i.length?"+ "+i.length+" service":"+ "+i.length+" service");var d="";for(var f in n)d=n.hasOwnProperty(f)?n[f]+" ":"";""==t?o.html("You chose "+c+"ports: "+d+r+"."):o.html("You chose "+t+c+r+").")},f=function(){c="";for(var t in e){var r=e[t];if("string"==typeof r)c+=""+r+"; ";else if("object"==typeof r)for(var i in r){var o=r[i];c+=""+o+"; "}}for(var l in a){var d=a[l];c+=""+d+"; "}var f="";for(var u in n)f=n.hasOwnProperty(u)?n[u]:"",c+=""+f+"; ";s.val(c)},u=function(){void 0!=localStorage.radioChoose?(e=JSON.parse(localStorage.radioChoose),a=JSON.parse(localStorage.checkboxChoose),n=JSON.parse(localStorage.inputValue),f(),d()):window.location.href=$("body").data("src")},v=function(){i[0].obj=r,l(),u()};v()},a=function(t){var e=this,a=t,n=a.find(".plans__item"),r=a.find('input[type="radio"]'),i=$(window),o=function(){i.on({load:function(){s()}}),r.on({change:function(){var t=$(this),e=t.parents(".plans__item");e.hasClass("active")||(n.removeClass("active"),e.addClass("active"))}}),n.on({click:function(){var t=$(this),e=t.find('input[type="radio"]:first');t.hasClass("active")||(n.removeClass("active"),t.addClass("active"),e.trigger("click"))}})},s=function(){var t=r.filter(":checked"),e=t.parents(".plans__item");e.addClass("active")},c=function(){a[0].obj=e,o()};c()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmNoZWNrb3V0LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiQ2xvdWRzQW5pbWF0ZWQiLCJ0aGlzIiwiR3V5QW5pbWF0ZWQiLCJDb250ZW50RnVsbEhlaWdodCIsIlBsYW5zQ2hvb3NlSGVpZ2h0IiwiTWVudSIsIlBvcHVwIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX2l0ZW1zIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9hZGRFdmVudHMiLCJ3aWR0aCIsIm9uIiwicmVzaXplIiwiX2NoZWNrUHV0SW5XaW5kb3ciLCJfY2hlY2tTY3JvbGwiLCJsb2FkIiwic2Nyb2xsIiwic2Nyb2xsUG9pbnQiLCJ0b3BQb3MiLCJvZmZzZXQiLCJ0b3AiLCJzdGFydCIsImhlaWdodCIsImVuZCIsIngiLCJzY3JvbGxUb3AiLCJoYXNDbGFzcyIsIl9hbmltYXRpb25FbGVtcyIsInN0YXJ0UG9pbnQiLCJlbmRQb2ludCIsImN1ckVsZW0iLCJ0cmFuc2xhdGVGaW5pc2giLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsImhlaWdodFdpbiIsImhlaWdodFNpdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiX2luaXQiLCJfaGFuZCIsImZpbmQiLCJfZ2xvYmFsV2lkdGgiLCJfY2hlY2tHZXRJbldpbmRvdyIsIndpbmRvd0giLCJzY3JvbGxUb3BXaW4iLCJoZWlnaHRPYmoiLCJwb3NpdGlvbk9iaiIsInNlZ21lbnQiLCJyb3RhdGVTdGFydCIsImRhdGEiLCJyb3RhdGVGaW5pc2giLCJrb2ZSb3RhdGUiLCJfaGVhZGVyIiwiX3NldEhlaWdodCIsImhlYWRlckhlaWd0aCIsIm1pbi1oZWlnaHQiLCJfY2FwdGlvbiIsIl9jb250ZW50IiwiX2NhcHRpb25IZWlnaHRzIiwiX2NvbnRlbnRIZWlnaHRzIiwiaW5uZXJIZWlnaHQiLCJwdXNoIiwibWF4SGVpZ2h0Q2FwdGlvbiIsIk1hdGgiLCJtYXgiLCJhcHBseSIsIm1heEhlaWdodENvbnRlbnQiLCJfbWVudUJ0biIsIl9tZW51SXRlbXMiLCJfaHRtbCIsIl9jbG9zZU1lbnUiLCJvdmVyZmxvdy15IiwiYXR0ciIsIl9vbkV2ZW50cyIsImNsaWNrIiwiX29wZW5NZW51IiwiX3BvcHVwUGFkZGluZyIsIl9idG5TaG93IiwiX2J0bkNsb3NlIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3RpbWVyIiwic2V0VGltZW91dCIsIl9jZW50ZXJXcmFwIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsIl9zaG93IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIkNob29zZURhdGEiLCJQYXN0ZURhdGEiLCJEYXRlUGxhbiIsIl9pbnB1dCIsIl9yZWRpcmVjdEJ0biIsIl9kYXRhUmFkaW8iLCJfZGF0YUNoZWNrYm94IiwiX2RhdGFJbnB1dCIsIl9pZEl0ZW1zIiwiX3ZhbHVlSW5wdXRJdGVtcyIsIl9nZXREYXRhIiwiX3dyaXRlSW5TZXNzaW9uU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5Iiwia2V5dXAiLCJrZXlkb3duIiwiaW5BcnJheSIsImtleUNvZGUiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImN1ckl0ZW0iLCJkYXRhU3JjIiwiX3dyaXRlQWxsSWQiLCJsb2NhdGlvbiIsImhyZWYiLCJlbGVtIiwicGFyZW50cyIsImxlbmd0aCIsInJhdGVQbGFuIiwic2Vzc2lvblR5cGUiLCJ2YWx1ZSIsImlzIiwidmFsIiwiX3NldENoZWNrZWROZWVkSW5wdXQiLCJ1bmRlZmluZWQiLCJpZEl0ZW1zIiwicHJvcCIsImFsbElkIiwicGFyc2UiLCJ2YWx1ZUlucHV0Iiwia2V5IiwiaXRlbSIsImNvbnNvbGUiLCJsb2ciLCJrZXkyIiwiaXRlbTEiLCJfd3JpdGVEYXRhSW5PYmpBZnRlckxvYWQiLCJfY2hvc2VuRGF0YSIsIl9zdHIiLCJfd3JpdGVJbkJsb2NrIiwiZGl2UmF0ZSIsIm51bSIsImFyciIsInNwbGl0IiwibWludXRlcyIsInJlcGxhY2UiLCJrZXkxIiwiaXRlbTIiLCJoYXNPd25Qcm9wZXJ0eSIsImh0bWwiLCJfd3JpdGVJbkhpZGRlbiIsImtleTMiLCJpdGVtMyIsIml0ZW00Iiwia2V5NCIsIl9nZXRTZXNzaW9uRGF0YSIsInJhZGlvQ2hvb3NlIiwiY2hlY2tib3hDaG9vc2UiLCJpbnB1dFZhbHVlIiwiX3JhZGlvIiwiX3NldEFjdGl2ZUNsYXNzIiwiY2hhbmdlIiwicGFyZW50IiwiZmlyc3RSYWRpbyIsInRyaWdnZXIiLCJhY3RpdmVSYWRpbyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUVDLEtBQU1ELEVBQUUsV0FBWSxXQUVsQixHQUFJRSxHQUFnQkYsRUFBRUcsU0FJMUJILEVBQUVDLEtBQU1ELEVBQUUsUUFBUyxXQUVmLEdBQUlJLEdBQWFKLEVBQUVHLFNBSXZCSCxFQUFFQyxLQUFNRCxFQUFFLHVCQUF3QixXQUU5QixHQUFJSyxHQUFtQkwsRUFBRUcsU0FJN0JILEVBQUVDLEtBQU1ELEVBQUUsVUFBVyxXQUVqQixHQUFJTSxHQUFtQk4sRUFBRUcsU0FJN0JILEVBQUVDLEtBQU1ELEVBQUUsaUJBQWtCLFdBRXhCLEdBQUlPLEdBQU1QLEVBQUVHLFNBSWhCSCxFQUFFLFVBQVVDLEtBQU0sV0FFZCxHQUFJTyxHQUFPUixFQUFFRyxVQU1yQixJQUFJRCxHQUFpQixTQUFVTyxHQUczQixHQUFJQyxHQUFRUCxLQUNSUSxFQUFPRixFQUNQRyxFQUFTRCxFQUNURSxFQUFVYixFQUFF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ekYsS0FBSyw0QkFFdkJ5RixHQUFReEcsU0FBUyxZQUVwQnBCLEVBQU9nQyxZQUFZLFVBQ25CNEYsRUFBUTdGLFNBQVMsVUFDakJrSixFQUFXQyxRQUFRLGNBUW5DSixFQUFrQixXQUVkLEdBQUlLLEdBQWNOLEVBQU8xRSxPQUFPLFlBQzVCNkUsRUFBU0csRUFBWWpELFFBQVEsZUFFN0I4QyxHQUFPakosU0FBUyxXQUd4QkUsRUFBUSxXQUVKbEMsRUFBSyxHQUFHRixJQUFNQyxFQUNkSyxJQUdSOEIiLCJmaWxlIjoiY2hlY2tvdXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY2xvdWRzJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IENsb3Vkc0FuaW1hdGVkKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmd1eScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBHdXlBbmltYXRlZCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19jb250ZW50X2Z1bGwnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ29udGVudEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucGxhbnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgUGxhbnNDaG9vc2VIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuc2l0ZV9faGVhZGVyJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IE1lbnUoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLnBvcHVwJykuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIG5ldyBQb3B1cCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBDbG91ZHNBbmltYXRlZCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIHZhciB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcCAsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdG9wUG9zIC0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gdG9wUG9zICsgX29iai5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgeCA9ICggZW5kIC0gX3dpbmRvdy5zY3JvbGxUb3AoKSApIC8gKCBlbmQgLSAgc3RhcnQgKTtcblxuICAgICAgICAgICAgICAgIGlmICggeCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggKCB4IDwgMSApICYmICggeCA+IDAgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHg7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQtYWxsJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwLjU7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMoIHN0YXJ0LCBlbmQsIHNjcm9sbFBvaW50ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMgPSBmdW5jdGlvbiAoIHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBzY3JvbGxQb2ludCApIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtcy5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckVsZW0gPSAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVTdGFydCA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVGaW5pc2ggPSAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gMTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VyRWxlbS5oYXNDbGFzcygnY2xvdWRzXzEnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcm9sbFBvaW50ID09IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIC10cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2Nyb2xsUG9pbnQgPT0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggLXRyYW5zbGF0ZUZpbmlzaCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCAtdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50IDwgMC41ICYmIHNjcm9sbFBvaW50ID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBjdXJFbGVtLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsoIHNjcm9sbFBvaW50ICogMjAwICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCBzY3JvbGxQb2ludCA+PSAwLjUgJiYgc2Nyb2xsUG9pbnQgPCAwLjggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCB0cmFuc2xhdGVGaW5pc2ggKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggdHJhbnNsYXRlRmluaXNoICogeCApKyAnJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoIHNjcm9sbFBvaW50ID49IDAuOCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBzY3JvbGxQb2ludCA9IDEuMyAtIHNjcm9sbFBvaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKCcgKyggc2Nyb2xsUG9pbnQgKiAyMDAgKiB4ICkrICclKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzY3JvbGxQb2ludCA+PSAwLjUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDEgLSBzY3JvbGxQb2ludDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcygge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoJyArKCBzY3JvbGxQb2ludCAqIDIwMCAqIHggKSsgJyUpJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFNpdGUgPSAkKCcuc2l0ZScpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGhlaWdodFNpdGUgPD0gaGVpZ2h0V2luICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBHdXlBbmltYXRlZCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9oYW5kID0gX29iai5maW5kKCcuZ3V5X19oYW5kJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2dsb2JhbFdpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2dsb2JhbFdpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaWR0aCA9IF93aW5kb3cud2lkdGgoKSArIDE7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhbmQuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrR2V0SW5XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93LndpZHRoKCkgPj0gNzY4KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dIID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gX2hhbmQub2Zmc2V0KCkudG9wIC0gd2luZG93SCxcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gdG9wUG9zIC0gd2luZG93SCArIF9vYmouaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50O1xuXG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IF9oYW5kLm9mZnNldCgpLnRvcCAtIHdpbmRvd0gvMjtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gd2luZG93SC8yLjU7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgeCA9ICggZW5kIC0gX3dpbmRvdy5zY3JvbGxUb3AoKSApIC8gKCBlbmQgLSAgc3RhcnQgKTtcblxuICAgICAgICAgICAgICAgIGlmICggeCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAwO1xuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb2ludCA9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggKCB4IDwgMSApICYmICggeCA+IDAgKSApe1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvaW50ID0gMSAtIHg7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICBfb2JqLmhhc0NsYXNzKCdwdXR0ZWQtYWxsJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9pbnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBfYW5pbWF0aW9uRWxlbXMoIHN0YXJ0LCBlbmQsIHNjcm9sbFBvaW50ICk7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0V2luID0gX3dpbmRvdy5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wV2luID1fd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRPYmogPSBfaGFuZC5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25PYmogPSBfaGFuZC5vZmZzZXQoKS50b3A7XG5cbiAgICAgICAgICAgICAgICBpZiggKCBoZWlnaHRPYmogKyBwb3NpdGlvbk9iaiA8IGhlaWdodFdpbiArIHNjcm9sbFRvcFdpbiApICYmICQoJy5zaXRlJykuaGVpZ2h0KCkgPiBoZWlnaHRXaW4gKiAyICApIHtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tQdXRJbldpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodFdpbiA9IF93aW5kb3cuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFNpdGUgPSAkKCcuc2l0ZScpLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGhlaWdodFNpdGUgPD0gaGVpZ2h0V2luICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ3B1dHRlZC1hbGwnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygncHV0dGVkLWFsbCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FuaW1hdGlvbkVsZW1zID0gZnVuY3Rpb24gKCBzdGFydFBvaW50LCBlbmRQb2ludCwgc2Nyb2xsUG9pbnQgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VnbWVudCA9IGVuZFBvaW50IC0gc3RhcnRQb2ludDtcblxuICAgICAgICAgICAgICAgIF9oYW5kLmVhY2goIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZVN0YXJ0ID0gY3VyRWxlbS5kYXRhKCdyb3RhdGUtc3RhcnQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZUZpbmlzaCA9IGN1ckVsZW0uZGF0YSgncm90YXRlLWZpbmlzaCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAga29mUm90YXRlID0gcm90YXRlU3RhcnQgKyAoIHJvdGF0ZUZpbmlzaCAtIHJvdGF0ZVN0YXJ0ICkgLyBzZWdtZW50ICogKCBfd2luZG93LnNjcm9sbFRvcCgpIC0gc3RhcnRQb2ludCApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2Nyb2xsUG9pbnQgPT0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1yb3RhdGVGaW5pc2ggKSArJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlRmluaXNoICkgKydkZWcgKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9fb2JqLnJlbW92ZUNsYXNzKCdwdXR0ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY3JvbGxQb2ludCA9PSAwICkge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlU3RhcnQgKSArJ2RlZyApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSggJysgKCAtcm90YXRlU3RhcnQgKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19vYmoucmVtb3ZlQ2xhc3MoJ3B1dHRlZCcpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1rb2ZSb3RhdGUgKSsnZGVnICknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCAnKyAoIC1rb2ZSb3RhdGUgKSArJ2RlZyApJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9jaGVja0dldEluV2luZG93KCk7XG4gICAgICAgICAgICAgICAgX2NoZWNrUHV0SW5XaW5kb3coKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQ29udGVudEZ1bGxIZWlnaHQgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckhlaWd0aCA9IF9oZWFkZXIuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmhlaWdodCggX3dpbmRvdy5oZWlnaHQoKSAtIGhlYWRlckhlaWd0aCApO1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogX29iai5maW5kKCc+ZGl2OmZpcnN0JykuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBQbGFuc0Nob29zZUhlaWdodCA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9jYXB0aW9uID0gX29iai5maW5kKCcucGxhbnNfX2xpc3RfY2FwdGlvbicpLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSBfb2JqLmZpbmQoJy5wbGFuc19fbGlzdC1yb3c6bm90KC5wbGFuc19fbGlzdF9jYXB0aW9uKScpLFxuICAgICAgICAgICAgX2NhcHRpb25IZWlnaHRzID0gW10sXG4gICAgICAgICAgICBfY29udGVudEhlaWdodHMgPSBbXTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhcHRpb24uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRlbnQuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9jYXB0aW9uSGVpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgICAgIF9jb250ZW50SGVpZ2h0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgX2NhcHRpb24uZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfY2FwdGlvbkhlaWdodHMucHVzaCggaGVpZ2h0ICk7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF4SGVpZ2h0Q2FwdGlvbiA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIF9jYXB0aW9uSGVpZ2h0cyk7XG5cblxuICAgICAgICAgICAgICAgIF9jb250ZW50LmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHRoaXMpLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX2NvbnRlbnRIZWlnaHRzLnB1c2goIGhlaWdodCApO1xuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodENvbnRlbnQgPSBNYXRoLm1heC5hcHBseShNYXRoLCBfY29udGVudEhlaWdodHMpO1xuXG4gICAgICAgICAgICAgICAgX2NhcHRpb24uaW5uZXJIZWlnaHQoIG1heEhlaWdodENhcHRpb24gKTtcbiAgICAgICAgICAgICAgICBfY29udGVudC5pbm5lckhlaWdodCggbWF4SGVpZ2h0Q29udGVudCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93KSxcbiAgICAgICAgICAgIF9tZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9faGVhZGVyX19idG4nKSxcbiAgICAgICAgICAgIF9tZW51SXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXItbWVudScpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jbG9zZU1lbnUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG5cbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bydcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfbWVudUl0ZW1zLmF0dHIoICdzdHlsZScsICcnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCdmaXhlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfbWVudUJ0bi5vbigge1xuXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA+IF9vYmouaW5uZXJIZWlnaHQoKS8yICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcblxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oIGZ1bmN0aW9uKCkge1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY2hvb3NlLWRhdGEnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2hvb3NlRGF0YSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5vcmRlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQYXN0ZURhdGEoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcucGxhbnMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRGF0ZVBsYW4oICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgQ2hvb3NlRGF0YSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmouZmluZCgnLmNob29zZS1kYXRhX19pdGVtcycpLFxuICAgICAgICAgICAgX2lucHV0ID0gX2l0ZW1zLmZpbmQoJ2lucHV0JyksXG4gICAgICAgICAgICBfcmVkaXJlY3RCdG4gPSBfb2JqLmZpbmQoJy5idG5fbmV4dCcpLFxuICAgICAgICAgICAgX2RhdGFSYWRpbyA9IHt9LFxuICAgICAgICAgICAgX2RhdGFDaGVja2JveCA9IHt9LFxuICAgICAgICAgICAgX2RhdGFJbnB1dCA9IHt9LFxuICAgICAgICAgICAgX2lkSXRlbXMgPSB7fSxcbiAgICAgICAgICAgIF92YWx1ZUlucHV0SXRlbXMgPSB7fTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhKCQodGhpcykuYXR0cigndHlwZScpID09PSAndGV4dCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dldERhdGEoICQodGhpcykgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd3JpdGVJblNlc3Npb25TdG9yYWdlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRJdGVtcycsIEpTT04uc3RyaW5naWZ5KF9pZEl0ZW1zKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLmF0dHIoJ3R5cGUnKSA9PT0gJ3RleHQnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dldERhdGEoICQodGhpcykgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd3JpdGVJblNlc3Npb25TdG9yYWdlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRJdGVtcycsIEpTT04uc3RyaW5naWZ5KF9pZEl0ZW1zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3ZhbHVlSW5wdXQnLCBKU09OLnN0cmluZ2lmeShfdmFsdWVJbnB1dEl0ZW1zKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS5oYXNDbGFzcygnc2l0ZV9faW5wdXRfbnVtJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGUua2V5Q29kZSwgWzQ2LCA4LCA5LCAyNywgMTMsIDExMCwgMTkwXSkgIT09IC0xIHx8XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUua2V5Q29kZSA9PSA2NSAmJiBlLmN0cmxLZXkgPT09IHRydWUpIHx8XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUua2V5Q29kZSA9PSA2NyAmJiBlLmN0cmxLZXkgPT09IHRydWUpIHx8XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUua2V5Q29kZSA9PSA4OCAmJiBlLmN0cmxLZXkgPT09IHRydWUpIHx8XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUua2V5Q29kZSA+PSAzNSAmJiBlLmtleUNvZGUgPD0gMzkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZS5zaGlmdEtleSB8fCAoZS5rZXlDb2RlIDwgNDggfHwgZS5rZXlDb2RlID4gNTcpKSAmJiAoZS5rZXlDb2RlIDwgOTYgfHwgZS5rZXlDb2RlID4gMTA1KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfcmVkaXJlY3RCdG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNyYyA9IGN1ckl0ZW0uZGF0YSgnc3JjJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF93cml0ZUFsbElkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YVNyYztcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0RGF0YSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xuXG4gICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAncmFkaW8nICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnBhcmVudHMoJy5wbGFucycpLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFSYWRpby5yYXRlUGxhbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVHlwZTogY3VySXRlbS5kYXRhKCdyYXRlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1ckl0ZW0uYXR0cigndmFsdWUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUmFkaW9bY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCd2YWx1ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfaWRJdGVtc1tjdXJJdGVtLmF0dHIoJ25hbWUnKV0gPSBjdXJJdGVtLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAnY2hlY2tib3gnICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VySXRlbS5pcyhcIjpjaGVja2VkXCIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGF0YUNoZWNrYm94W2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cigndmFsdWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZEl0ZW1zW2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cignaWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX2RhdGFDaGVja2JveFtjdXJJdGVtLmF0dHIoJ25hbWUnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAndGV4dCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJJdGVtLnZhbCgpICE9ICcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGF0YUlucHV0W2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0udmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRJdGVtc1tjdXJJdGVtLmF0dHIoJ25hbWUnKV0gPSBjdXJJdGVtLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsdWVJbnB1dEl0ZW1zW2N1ckl0ZW0uYXR0cignaWQnKV0gPSBjdXJJdGVtLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfZGF0YUlucHV0W2N1ckl0ZW0uYXR0cignbmFtZScpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfaWRJdGVtc1tjdXJJdGVtLmF0dHIoJ25hbWUnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3ZhbHVlSW5wdXRJdGVtc1tjdXJJdGVtLmF0dHIoJ2lkJyldO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0Q2hlY2tlZE5lZWRJbnB1dCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5pZEl0ZW1zICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICBfaW5wdXQuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAnY2hlY2tib3gnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5wcm9wKCdjaGVja2VkJywgZmFsc2UgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ3RleHQnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS52YWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxJZCA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS5pZEl0ZW1zKSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVJbnB1dCA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS52YWx1ZUlucHV0ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5IGluIGFsbElkICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBhbGxJZFsga2V5IF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uZmlsdGVyKCcjJysgaXRlbSArJycpLnByb3AoJ2NoZWNrZWQnLCB0cnVlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAndGV4dCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5MiBpbiB2YWx1ZUlucHV0ICApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0xID0gdmFsdWVJbnB1dFsga2V5MiBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmZpbHRlcignIycrIGl0ZW0gKycnKS52YWwoIGl0ZW0xICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG5cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF93cml0ZUFsbElkID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ3JhZGlvJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZEl0ZW1zW2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cignaWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBjdXJJdGVtLmF0dHIoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94JyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmlzKFwiOmNoZWNrZWRcIikgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCdpZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAndGV4dCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnZhbCgpICE9ICcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZUlucHV0SXRlbXNbY3VySXRlbS5hdHRyKCdpZCcpXSA9IGN1ckl0ZW0udmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX2lkSXRlbXNbY3VySXRlbS5hdHRyKCduYW1lJyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdmFsdWVJbnB1dEl0ZW1zW2N1ckl0ZW0uYXR0cignaWQnKV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3ZhbHVlSW5wdXQnLCBKU09OLnN0cmluZ2lmeShfdmFsdWVJbnB1dEl0ZW1zKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkSXRlbXMnLCBKU09OLnN0cmluZ2lmeShfaWRJdGVtcykpO1xuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVEYXRhSW5PYmpBZnRlckxvYWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5lYWNoKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uaXMoXCI6Y2hlY2tlZFwiKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAncmFkaW8nICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0ucGFyZW50cygnLnBsYW5zJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUmFkaW8ucmF0ZVBsYW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVHlwZTogY3VySXRlbS5kYXRhKCdyYXRlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VySXRlbS5hdHRyKCd2YWx1ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUmFkaW9bY3VySXRlbS5hdHRyKCduYW1lJyldID0gY3VySXRlbS5hdHRyKCd2YWx1ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGN1ckl0ZW0uYXR0cigndHlwZScpID09PSAnY2hlY2tib3gnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uaXMoXCI6Y2hlY2tlZFwiKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YUNoZWNrYm94W2N1ckl0ZW0uYXR0cignbmFtZScpXSA9IGN1ckl0ZW0uYXR0cigndmFsdWUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF9kYXRhQ2hlY2tib3hbY3VySXRlbS5hdHRyKCduYW1lJyldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCd0eXBlJykgPT09ICd0ZXh0JyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJJdGVtLnZhbCgpICE9ICcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFJbnB1dFtjdXJJdGVtLmF0dHIoJ25hbWUnKV0gPSBjdXJJdGVtLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF9kYXRhSW5wdXRbY3VySXRlbS5hdHRyKCduYW1lJyldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF93cml0ZUluU2Vzc2lvblN0b3JhZ2UoKTtcbiAgICAgICAgICAgICAgICBfd3JpdGVBbGxJZCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3dyaXRlSW5TZXNzaW9uU3RvcmFnZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JhZGlvQ2hvb3NlJywgSlNPTi5zdHJpbmdpZnkoX2RhdGFSYWRpbykpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaGVja2JveENob29zZScsIEpTT04uc3RyaW5naWZ5KF9kYXRhQ2hlY2tib3gpKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaW5wdXRWYWx1ZScsIEpTT04uc3RyaW5naWZ5KF9kYXRhSW5wdXQpKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldENoZWNrZWROZWVkSW5wdXQoKTtcbiAgICAgICAgICAgICAgICBfd3JpdGVEYXRhSW5PYmpBZnRlckxvYWQoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUGFzdGVEYXRhID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2Nob3NlbkRhdGEgPSBfb2JqLmZpbmQoJy5vcmRlcl9fY2hvc2VuLWRhdGEgc3BhbicpLFxuICAgICAgICAgICAgX2RhdGFSYWRpbyxcbiAgICAgICAgICAgIF9kYXRhQ2hlY2tib3gsXG4gICAgICAgICAgICBfZGF0YUlucHV0LFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCdpbnB1dCNpbnB1dF8xXzUnKSxcbiAgICAgICAgICAgIF9hcnIgPSBbXSxcbiAgICAgICAgICAgIF9zdHIgPSAnJztcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkJsb2NrID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGl2UmF0ZSA9ICcnLFxuICAgICAgICAgICAgICAgICAgICBudW0gPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkgaW4gX2RhdGFSYWRpbyAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfZGF0YVJhZGlvWyBrZXkgXSArICcsICc7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggX2RhdGFSYWRpby5yYXRlUGxhbiAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBfZGF0YVJhZGlvLnJhdGVQbGFuLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX2RhdGFSYWRpby5yYXRlUGxhbi52YWx1ZS5zcGxpdCgnICcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2RhdGFSYWRpby5yYXRlUGxhbi5zZXNzaW9uVHlwZSA9PT0gJ3Nlc3Npb24gcHJpY2luZycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZSYXRlID0gJzxzcGFuPicrIF9kYXRhUmFkaW8ucmF0ZVBsYW4uc2Vzc2lvblR5cGUgKycgKCcrIHZhbHVlWzBdICsnIHNlc3Npb25zKTwvc3Bhbj4nICsgJywgJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfZGF0YVJhZGlvLnJhdGVQbGFuLnNlc3Npb25UeXBlID09PSAnbWludXRlIHByaWNpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSB2YWx1ZVswXS5yZXBsYWNlKC9bXjAtOV0rL2csJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIG1pbnV0ZXMgPiAxMDAwMDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pbnV0ZXMvMTAwMDAwMCArICdNJ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2UmF0ZSA9ICc8c3Bhbj4nKyBfZGF0YVJhZGlvLnJhdGVQbGFuLnNlc3Npb25UeXBlICsnICgnKyBtaW51dGVzICsnIG1pbnV0ZXMgKCcgKyB2YWx1ZVsyXSArICcvbWludXRlKTwvc3Bhbj4nICsgJywgJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGRpdlJhdGUgPT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZGl2UmF0ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5MSBpbiBfZGF0YUNoZWNrYm94ICApIHtcblxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChrZXkxKVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGFyci5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBhcnIubGVuZ3RoID09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9ICcrICcgKyBhcnIubGVuZ3RoICsgJyBzZXJ2aWNlJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAnKyAnICsgYXJyLmxlbmd0aCArICcgc2VydmljZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0yID0gJyc7XG5cbiAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkyIGluIF9kYXRhSW5wdXQgICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGF0YUlucHV0Lmhhc093blByb3BlcnR5KGtleTIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0yID0gX2RhdGFJbnB1dFsga2V5MiBdICArICcgJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtMiA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIGRpdlJhdGUgPT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2Nob3NlbkRhdGEuaHRtbCgnWW91IGNob3NlICcgKyBpdGVtICsgJ3BvcnRzOiAnICsgaXRlbTIgKyBudW0gKyAnLicpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfY2hvc2VuRGF0YS5odG1sKCdZb3UgY2hvc2UgJyArIGRpdlJhdGUgKyBpdGVtICsgbnVtICsgJykuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGVJbkhpZGRlbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N0ciA9ICcnO1xuXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIga2V5IGluIF9kYXRhUmFkaW8gICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2RhdGFSYWRpb1sga2V5IF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3N0ciArPSAnJysgaXRlbSArJzsgJ1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciBrZXkxIGluIGl0ZW0gICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0xID0gaXRlbVsga2V5MSBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0ciArPSAnJysgaXRlbTEgKyc7ICdcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciggdmFyIGtleTMgaW4gX2RhdGFDaGVja2JveCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0zID0gX2RhdGFDaGVja2JveFsga2V5MyBdO1xuXG4gICAgICAgICAgICAgICAgICAgIF9zdHIgKz0gJycrIGl0ZW0zICsnOyAnXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaXRlbTQgPSAnJztcblxuICAgICAgICAgICAgICAgIGZvciggdmFyIGtleTQgaW4gX2RhdGFJbnB1dCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kYXRhSW5wdXQuaGFzT3duUHJvcGVydHkoa2V5NCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTQgPSBfZGF0YUlucHV0WyBrZXk0IF07XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTQgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgX3N0ciArPSAnJysgaXRlbTQgKyc7ICdcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9zdHIgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTZXNzaW9uRGF0YSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2RhdGFSYWRpbyA9IEpTT04ucGFyc2UoIGxvY2FsU3RvcmFnZS5yYWRpb0Nob29zZSApO1xuICAgICAgICAgICAgICAgICAgICBfZGF0YUNoZWNrYm94ID0gSlNPTi5wYXJzZSggbG9jYWxTdG9yYWdlLmNoZWNrYm94Q2hvb3NlICk7XG4gICAgICAgICAgICAgICAgICAgIF9kYXRhSW5wdXQgPSBKU09OLnBhcnNlKCBsb2NhbFN0b3JhZ2UuaW5wdXRWYWx1ZSApO1xuXG4gICAgICAgICAgICAgICAgICAgIF93cml0ZUluSGlkZGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIF93cml0ZUluQmxvY2soKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKCdib2R5JykuZGF0YSgnc3JjJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9nZXRTZXNzaW9uRGF0YSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRGF0ZVBsYW4gPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoJy5wbGFuc19faXRlbScpLFxuICAgICAgICAgICAgX3JhZGlvID0gX29iai5maW5kKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0QWN0aXZlQ2xhc3MoKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3JhZGlvLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudHMoJy5wbGFuc19faXRlbScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggISggcGFyZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZW1zLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9pdGVtcy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFJhZGlvID0gY3VySXRlbS5maW5kKCdpbnB1dFt0eXBlPVwicmFkaW9cIl06Zmlyc3QnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICEoIGN1ckl0ZW0uaGFzQ2xhc3MoJ2FjdGl2ZScpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlbXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UmFkaW8udHJpZ2dlcignY2xpY2snKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0QWN0aXZlQ2xhc3MgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVSYWRpbyA9IF9yYWRpby5maWx0ZXIoJzpjaGVja2VkJyksXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGFjdGl2ZVJhZGlvLnBhcmVudHMoJy5wbGFuc19faXRlbScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
